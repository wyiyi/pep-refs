<!DOCTYPE html>
<!-- saved from url=(0073)http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script type="text/javascript" async="" src="./Spring Data Redis_files/docsearchbarspring"></script>

<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.3">
<meta name="author" content="Costin Leau, Jennifer Hickey, Christoph Strobl, Thomas Darimont, Mark Paluch">
<title>Spring Data Redis</title>
<link rel="stylesheet" href="./Spring Data Redis_files/spring.css">
<link rel="stylesheet" href="./Spring Data Redis_files/font-awesome.min.css">
<script type="text/javascript" async="" src="./Spring Data Redis_files/inpage_linkid.js" id="undefined"></script><script src="./Spring Data Redis_files/jquery-1.4.2.min.js" type="text/javascript"></script><link rel="stylesheet" href="./Spring Data Redis_files/searchtool.css" type="text/css"><link rel="stylesheet" href="./Spring Data Redis_files/searchtool_spring.css" type="text/css"><style id="style-1-cropbar-clipper">/* Copyright 2014 Evernote Corporation. All rights reserved. */
.en-markup-crop-options {
    top: 18px !important;
    left: 50% !important;
    margin-left: -100px !important;
    width: 200px !important;
    border: 2px rgba(255,255,255,.38) solid !important;
    border-radius: 4px !important;
}

.en-markup-crop-options div div:first-of-type {
    margin-left: 0px !important;
}
</style></head>
<body class="book">
<div id="header">
<h1>Spring Data Redis</h1>
<div class="details">
<span id="author" class="author">Costin Leau, Jennifer Hickey, Christoph Strobl, Thomas Darimont, Mark Paluch</span><br>
<span id="revnumber">version 1.7.4.RELEASE,</span>
<span id="revdate">2016-09-29</span>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>© 2011-2016 The original authors.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Copies of this document may be made for your own use and for distribution to others, provided that you do not charge any fee for such copies and further provided that each copy contains this Copyright Notice, whether distributed in print or electronically.
</td>
</tr>
</tbody></table>
</div>
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#_preface">Preface</a>
<ul class="sectlevel1">
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#new-features">1. New Features</a>
<ul class="sectlevel2">
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#new-in-1.7.0">1.1. New in Spring Data Redis 1.7</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#new-in-1-6-0">1.2. New in Spring Data Redis 1.6</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#new-in-1-5-0">1.3. New in Spring Data Redis 1.5</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#introduction">Introduction</a>
<ul class="sectlevel1">
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#why-spring-redis">2. Why Spring Data Redis?</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#requirements">3. Requirements</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#get-started">4. Getting Started</a>
<ul class="sectlevel2">
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#get-started:first-steps">4.1. First Steps</a>
<ul class="sectlevel3">
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#get-started:first-steps:spring">4.1.1. Knowing Spring</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#get-started:first-steps:nosql">4.1.2. Knowing NoSQL and Key Value stores</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#get-started:first-steps:samples">4.1.3. Trying Out The Samples</a></li>
</ul>
</li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#get-started:help">4.2. Need Help?</a>
<ul class="sectlevel3">
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#get-started:help:community">4.2.1. Community Support</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#get-started:help:professional">4.2.2. Professional Support</a></li>
</ul>
</li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#get-started:up-to-date">4.3. Following Development</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#reference">Reference Documentation</a>
<ul class="sectlevel1">
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis">5. Redis support</a>
<ul class="sectlevel2">
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:requirements">5.1. Redis Requirements</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:architecture">5.2. Redis Support High Level View</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:connectors">5.3. Connecting to Redis</a>
<ul class="sectlevel3">
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:connectors:connection">5.3.1. RedisConnection and RedisConnectionFactory</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:connectors:jedis">5.3.2. Configuring Jedis connector</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:connectors:jredis">5.3.3. Configuring JRedis connector (Deprecated since 1.7)</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:connectors:srp">5.3.4. Configuring SRP connector (Deprecated since 1.7)</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:connectors:lettuce">5.3.5. Configuring Lettuce connector</a></li>
</ul>
</li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:sentinel">5.4. Redis Sentinel Support</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:template">5.5. Working with Objects through RedisTemplate</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:string">5.6. String-focused convenience classes</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:serializer">5.7. Serializers</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#pubsub">5.8. Redis Messaging/PubSub</a>
<ul class="sectlevel3">
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:pubsub:publish">5.8.1. Sending/Publishing messages</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:pubsub:subscribe">5.8.2. Receiving/Subscribing for messages</a></li>
</ul>
</li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#tx">5.9. Redis Transactions</a>
<ul class="sectlevel3">
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#tx.spring">5.9.1. @Transactional Support</a></li>
</ul>
</li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#pipeline">5.10. Pipelining</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#scripting">5.11. Redis Scripting</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:support">5.12. Support Classes</a>
<ul class="sectlevel3">
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:support:cache-abstraction">5.12.1. Support for Spring Cache Abstraction</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#cluster">6. Redis Cluster</a>
<ul class="sectlevel2">
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#_enabling_redis_cluster">6.1. Enabling Redis Cluster</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#_working_with_redis_cluster_connection">6.2. Working With Redis Cluster Connection</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#_working_with_redistemplate_and_clusteroperations">6.3. Working With RedisTemplate and ClusterOperations</a></li>
</ul>
</li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis.repositories">7. Redis Repositories</a>
<ul class="sectlevel2">
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis.repositories.usage">7.1. Usage</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis.repositories.mapping">7.2. Object to Hash Mapping</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis.repositories.keyspaces">7.3. Keyspaces</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis.repositories.indexes">7.4. Secondary Indexes</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis.repositories.expirations">7.5. Time To Live</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis.repositories.references">7.6. Persisting References</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis.repositories.queries">7.7. Queries and Query Methods</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis.repositories.cluster">7.8. Redis Repositories running on Cluster</a></li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis.repositories.cdi-integration">7.9. CDI integration</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#appendixes">Appendixes</a>
<ul class="sectlevel1">
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#appendix:schema">Appendix A: Schema</a>
<ul class="sectlevel2">
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#_core_schema">Core schema</a></li>
</ul>
</li>
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#appendix:command-reference">Appendix B: Command Reference</a>
<ul class="sectlevel2">
<li><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#_supported_commands">Supported commands</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<h1 id="_preface" class="sect0"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#_preface"></a>Preface</h1>
<div class="openblock partintro">
<div class="content">
The Spring Data Redis project applies core Spring concepts to the development of solutions using a key-value style data store. We provide a "template" as a high-level abstraction for sending and receiving messages. You will notice similarities to the JDBC support in the Spring Framework.
</div>
</div>
<div class="sect1">
<h2 id="new-features"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#new-features"></a>1. New Features</h2>
<div class="sectionbody">
<div class="paragraph">
<p>New and noteworthy in the latest releases.</p>
</div>
<div class="sect2">
<h3 id="new-in-1.7.0"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#new-in-1.7.0"></a>1.1. New in Spring Data Redis 1.7</h3>
<div class="ulist">
<ul>
<li>
<p>Support for <a href="http://redis.io/topics/cluster-tutorial">RedisCluster</a>.</p>
</li>
<li>
<p>Support for Spring Data Repository abstractions (see <a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis.repositories">Redis Repositories</a>).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="new-in-1-6-0"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#new-in-1-6-0"></a>1.2. New in Spring Data Redis 1.6</h3>
<div class="ulist">
<ul>
<li>
<p>The <code>Lettuce</code> Redis driver switched from <a href="https://github.com/wg/lettuce">wg/lettuce</a> to <a href="https://github.com/mp911de/lettuce">mp911de/lettuce</a>.</p>
</li>
<li>
<p>Support for <code>ZRANGEBYLEX</code>.</p>
</li>
<li>
<p>Enhanced range operations for <code>ZSET</code> s including <code>+inf</code> / <code>-inf</code>.</p>
</li>
<li>
<p>Performance improvements in <code>RedisCache</code> now releasing connections earlier.</p>
</li>
<li>
<p>Generic Jackson2 <code>RedisSerializer</code> making use of Jackson’s polymorphic deserialization.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="new-in-1-5-0"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#new-in-1-5-0"></a>1.3. New in Spring Data Redis 1.5</h3>
<div class="ulist">
<ul>
<li>
<p>Add support for Redis HyperLogLog commands <code>PFADD</code>, <code>PFCOUNT</code> and <code>PFMERGE</code>.</p>
</li>
<li>
<p>Configurable <code>JavaType</code> lookup for Jackson based <code>RedisSerializers</code>.</p>
</li>
<li>
<p><code>PropertySource</code> based configuration for connecting to Redis Sentinel (see: <a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:sentinel">Redis Sentinel Support</a>).</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<h1 id="introduction" class="sect0"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#introduction"></a>Introduction</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>This document is the reference guide for Spring Data Redis (SDR) Support. It explains Key Value module concepts and semantics and the syntax for various stores namespaces.</p>
</div>
<div class="paragraph">
<p>For an introduction to key value stores or Spring, or Spring Data examples, please refer to <a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#get-started">Getting Started</a> - this documentation refers only to Spring Data Redis Support and assumes the user is familiar with the key value storages and Spring concepts.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="why-spring-redis"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#why-spring-redis"></a>2. Why Spring Data Redis?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Spring Framework is the leading full-stack Java/JEE application framework. It provides a lightweight container and a non-invasive programming model enabled by the use of dependency injection, AOP, and portable service abstractions.</p>
</div>
<div class="paragraph">
<p><a href="http://en.wikipedia.org/wiki/NoSQL">NoSQL</a> storages provide an alternative to classical RDBMS for horizontal scalability and speed. In terms of implementation, Key Value stores represent one of the largest (and oldest) members in the NoSQL space.</p>
</div>
<div class="paragraph">
<p>The Spring Data Redis (or SDR) framework makes it easy to write Spring applications that use the Redis key value store by eliminating the redundant tasks and boiler plate code required for interacting with the store through Spring’s excellent infrastructure support.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="requirements"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#requirements"></a>3. Requirements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Data Redis 1.x binaries requires JDK level 6.0 and above, and <a href="http://projects.spring.io/spring-framework/">Spring Framework</a> 4.2.8.RELEASE and above.</p>
</div>
<div class="paragraph">
<p>In terms of key value stores, <a href="http://redis.io/">Redis</a> 2.6.x or higher is required. Spring Data Redis is currently tested against the latest 3.0 release.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="get-started"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#get-started"></a>4. Getting Started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Learning a new framework is not always straight forward. In this section, we (the Spring Data team) tried to provide, what we think is, an easy to follow guide for starting with the Spring Data Redis module. Of course, feel free to create your own learning 'path' as you see fit and, if possible, please report back any improvements to the documentation that can help others.</p>
</div>
<div class="sect2">
<h3 id="get-started:first-steps"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#get-started:first-steps"></a>4.1. First Steps</h3>
<div class="paragraph">
<p>As explained in <a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#why-spring-redis">Why Spring Data Redis?</a>, Spring Data Redis (SDR) provides integration between Spring framework and the Redis key value store. Thus, it is important to become acquainted with both of these frameworks (storages or environments depending on how you want to name them). Throughout the SDR documentation, each section provides links to resources relevant however, it is best to become familiar with these topics beforehand.</p>
</div>
<div class="sect3">
<h4 id="get-started:first-steps:spring"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#get-started:first-steps:spring"></a>4.1.1. Knowing Spring</h4>
<div class="paragraph">
<p>Spring Data uses heavily Spring framework’s <a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/html/spring-core.html">core</a> functionality, such as the <a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html">IoC</a> container, <a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/html/resources.html">resource</a> abstract or <a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html">AOP</a> infrastructure. While it is not important to know the Spring APIs, understanding the concepts behind them is. At a minimum, the idea behind IoC should be familiar. That being said, the more knowledge one has about the Spring, the faster she will pick up Spring Data Redis. Besides the very comprehensive (and sometimes disarming) documentation that explains in detail the Spring Framework, there are a lot of articles, blog entries and books on the matter - take a look at the Spring Guides <a href="http://spring.io/guides">home page</a> for more information. In general, this should be the starting point for developers wanting to try Spring DR.</p>
</div>
</div>
<div class="sect3">
<h4 id="get-started:first-steps:nosql"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#get-started:first-steps:nosql"></a>4.1.2. Knowing NoSQL and Key Value stores</h4>
<div class="paragraph">
<p>NoSQL stores have taken the storage world by storm. It is a vast domain with a plethora of solutions, terms and patterns (to make things worse even the term itself has multiple <a href="http://www.google.com/search?q=nosoql+acronym">meanings</a>). While some of the principles are common, it is crucial that the user is familiar to some degree with the stores supported by SDR. The best way to get acquainted with these solutions is to read their documentation and follow their examples - it usually doesn’t take more then 5-10 minutes to go through them and if you are coming from an RDMBS-only background many times these exercises can be an eye opener.</p>
</div>
</div>
<div class="sect3">
<h4 id="get-started:first-steps:samples"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#get-started:first-steps:samples"></a>4.1.3. Trying Out The Samples</h4>
<div class="paragraph">
<p>One can find various samples for key value stores in the dedicated example repo, at <a href="https://github.com/spring-projects/spring-data-keyvalue-examples">http://github.com/spring-projects/spring-data-keyvalue-examples</a>. For Spring Data Redis, of interest is the <code>retwisj</code> sample, a Twitter-clone built on top of Redis which can be run locally or be deployed into the cloud. See its <a href="http://static.springsource.org/spring-data/data-keyvalue/examples/retwisj/current/">documentation</a>, the following blog <a href="http://blog.springsource.com/2011/04/27/getting-started-redis-spring-cloud-foundry/">entry</a> or the <a href="http://retwisj.cloudfoundry.com/">live instance</a> for more information.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="get-started:help"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#get-started:help"></a>4.2. Need Help?</h3>
<div class="paragraph">
<p>If you encounter issues or you are just looking for advice, feel free to use one of the links below:</p>
</div>
<div class="sect3">
<h4 id="get-started:help:community"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#get-started:help:community"></a>4.2.1. Community Support</h4>
<div class="paragraph">
<p>The Spring Data tag on <a href="http://stackoverflow.com/questions/tagged/spring-data">Stackoverflow</a> is a message board for all Spring Data (not just Redis) users to share information and help each other. Note that registration is needed <strong>only</strong> for posting.</p>
</div>
</div>
<div class="sect3">
<h4 id="get-started:help:professional"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#get-started:help:professional"></a>4.2.2. Professional Support</h4>
<div class="paragraph">
<p>Professional, from-the-source support, with guaranteed response time, is available from <a href="http://www.gopivotal.com/">Pivotal Software, Inc.</a>, the company behind Spring Data and Spring.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="get-started:up-to-date"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#get-started:up-to-date"></a>4.3. Following Development</h3>
<div class="paragraph">
<p>For information on the Spring Data source code repository, nightly builds and snapshot artifacts please see the Spring Data home <a href="http://spring.io/spring-data">page</a>.</p>
</div>
<div class="paragraph">
<p>You can help make Spring Data best serve the needs of the Spring community by interacting with developers on Stackoverflow at either
<a href="http://stackoverflow.com/questions/tagged/spring-data">spring-data</a> or <a href="http://stackoverflow.com/questions/tagged/spring-data-redis">spring-data-redis</a>.</p>
</div>
<div class="paragraph">
<p>If you encounter a bug or want to suggest an improvement, please create a ticket on the Spring Data issue <a href="https://jira.springsource.org/browse/DATAREDIS">tracker</a>.</p>
</div>
<div class="paragraph">
<p>To stay up to date with the latest news and announcements in the Spring eco system, subscribe to the Spring Community <a href="http://spring.io/">Portal</a>.</p>
</div>
<div class="paragraph">
<p>Lastly, you can follow the Spring <a href="http://spring.io/blog/">blog</a> or the project team (<a href="http://twitter.com/thomasdarimont">Thomas</a> and <a href="http://twitter.com/stroblchristoph">Christoph</a>) on Twitter.</p>
</div>
</div>
</div>
</div>
<h1 id="reference" class="sect0"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#reference"></a>Reference Documentation</h1>
<div class="openblock partintro">
<div class="content">
<h2 id="_document_structure" class="float">Document structure</h2>
<div class="paragraph">
<p>This part of the reference documentation explains the core functionality offered by Spring Data Redis.</p>
</div>
<div class="paragraph">
<p><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis">Redis support</a> introduces the Redis module feature set.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="redis"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis"></a>5. Redis support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>One of the key value stores supported by Spring Data is <a href="http://redis.io/">Redis</a>. To quote the project home page:</p>
</div>
<div class="quoteblock">
<blockquote>
Redis is an advanced key-value store. It is similar to memcached but the dataset is not volatile, and values can be strings, exactly like in memcached, but also lists, sets, and ordered sets. All this data types can be manipulated with atomic operations to push/pop elements, add/remove elements, perform server side union, intersection, difference between sets, and so forth. Redis supports different kind of sorting abilities.
</blockquote>
</div>
<div class="paragraph">
<p>Spring Data Redis provides easy configuration and access to Redis from Spring applications. It offers both low-level and high-level abstractions for interacting with the store, freeing the user from infrastructural concerns.</p>
</div>
<div class="sect2">
<h3 id="redis:requirements"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:requirements"></a>5.1. Redis Requirements</h3>
<div class="paragraph">
<p>Spring Redis requires Redis 2.6 or above and Java SE 6.0 or above . In terms of language bindings (or connectors), Spring Redis integrates with <a href="http://github.com/xetorthio/jedis">Jedis</a>, <a href="http://github.com/alphazero/jredis">JRedis</a> (Deprecated since 1.7), <a href="http://github.com/spullara/redis-protocol">SRP</a> (Deprecated since 1.7) and <a href="http://github.com/wg/lettuce">Lettuce</a>, four popular open source Java libraries for Redis. If you are aware of any other connector that we should be integrating with please send us feedback.</p>
</div>
</div>
<div class="sect2">
<h3 id="redis:architecture"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:architecture"></a>5.2. Redis Support High Level View</h3>
<div class="paragraph">
<p>The Redis support provides several components (in order of dependencies):</p>
</div>
<div class="paragraph">
<p>For most tasks, the high-level abstractions and support services are the best choice. Note that at any point, one can move between layers - for example, it’s very easy to get a hold of the low level connection (or even the native library) to communicate directly with Redis.</p>
</div>
</div>
<div class="sect2">
<h3 id="redis:connectors"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:connectors"></a>5.3. Connecting to Redis</h3>
<div class="paragraph">
<p>One of the first tasks when using Redis and Spring is to connect to the store through the IoC container. To do that, a Java connector (or binding) is required. No matter the library one chooses, there is only one set of Spring Data Redis API that one needs to use that behaves consistently across all connectors, namely the <code>org.springframework.data.redis.connection</code> package and its <code>RedisConnection</code> and <code>RedisConnectionFactory</code> interfaces for working with and retrieving active <code>connections</code> to Redis.</p>
</div>
<div class="sect3">
<h4 id="redis:connectors:connection"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:connectors:connection"></a>5.3.1. RedisConnection and RedisConnectionFactory</h4>
<div class="paragraph">
<p><code>RedisConnection</code> provides the building block for Redis communication as it handles the communication with the Redis back-end. It also automatically translates the underlying connecting library exceptions to Spring’s consistent DAO exception <a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/html/dao.html#dao-exceptions">hierarchy</a> so one can switch the connectors without any code changes as the operation semantics remain the same.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the corner cases where the native library API is required, <code>RedisConnection</code> provides a dedicated method <code>getNativeConnection</code> which returns the raw, underlying object used for communication.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Active <code>RedisConnection</code> s are created through <code>RedisConnectionFactory</code>. In addition, the factories act as <code>PersistenceExceptionTranslator</code> s, meaning once declared, they allow one to do transparent exception translation. For example, exception translation through the use of the <code>@Repository</code> annotation and AOP. For more information see the dedicated <a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/html/orm.html#orm-exception-translation">section</a> in Spring Framework documentation.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Depending on the underlying configuration, the factory can return a new connection or an existing connection (in case a pool or shared native connection is used).
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The easiest way to work with a <code>RedisConnectionFactory</code> is to configure the appropriate connector through the IoC container and inject it into the using class.</p>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Unfortunately, currently, not all connectors support all Redis features. When invoking a method on the Connection API that is unsupported by the underlying library, an <code>UnsupportedOperationException</code> is thrown.
This situation is likely to be fixed in the future, as the various connectors mature.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="redis:connectors:jedis"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:connectors:jedis"></a>5.3.2. Configuring Jedis connector</h4>
<div class="paragraph">
<p><a href="http://github.com/xetorthio/jedis">Jedis</a> is one of the connectors supported by the Spring Data Redis module through the <code>org.springframework.data.redis.connection.jedis</code> package. In its simplest form, the Jedis configuration looks as follow:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-xml" data-lang="xml"><span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">"UTF-8"</span><span class="pun">?&gt;</span><span class="pln">
</span><span class="tag">&lt;beans</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/beans"</span><span class="pln">
  </span><span class="atn">xmlns:xsi</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln">
  </span><span class="atn">xsi:schemaLocation</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="tag">&gt;</span><span class="pln">

  </span><span class="com">&lt;!-- Jedis ConnectionFactory --&gt;</span><span class="pln">
  </span><span class="tag">&lt;bean</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"jedisConnectionFactory"</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"org.springframework.data.redis.connection.jedis.JedisConnectionFactory"</span><span class="tag">/&gt;</span><span class="pln">

</span><span class="tag">&lt;/beans&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For production use however, one might want to tweak the settings such as the host or password:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-xml" data-lang="xml"><span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">"UTF-8"</span><span class="pun">?&gt;</span><span class="pln">
</span><span class="tag">&lt;beans</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/beans"</span><span class="pln">
  </span><span class="atn">xmlns:xsi</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln">
  </span><span class="atn">xmlns:p</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/p"</span><span class="pln">
  </span><span class="atn">xsi:schemaLocation</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="tag">&gt;</span><span class="pln">

  </span><span class="tag">&lt;bean</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"jedisConnectionFactory"</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"org.springframework.data.redis.connection.jedis.JedisConnectionFactory"</span><span class="pln"> </span><span class="atn">p:host-name</span><span class="pun">=</span><span class="atv">"server"</span><span class="pln"> </span><span class="atn">p:port</span><span class="pun">=</span><span class="atv">"6379"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">

</span><span class="tag">&lt;/beans&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="redis:connectors:jredis"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:connectors:jredis"></a>5.3.3. Configuring JRedis connector (Deprecated since 1.7)</h4>
<div class="paragraph">
<p><a href="http://github.com/alphazero/jredis">JRedis</a> is another popular, open-source connector supported by Spring Data Redis through the <code>org.springframework.data.redis.connection.jredis</code> package.</p>
</div>
<div class="paragraph">
<p>A typical JRedis configuration can looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-xml" data-lang="xml"><span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">"UTF-8"</span><span class="pun">?&gt;</span><span class="pln">
</span><span class="tag">&lt;beans</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/beans"</span><span class="pln">
  </span><span class="atn">xmlns:xsi</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln">
  </span><span class="atn">xmlns:p</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/p"</span><span class="pln">
  </span><span class="atn">xsi:schemaLocation</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="tag">&gt;</span><span class="pln">

  </span><span class="tag">&lt;bean</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"jredisConnectionFactory"</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"org.springframework.data.redis.connection.jredis.JredisConnectionFactory"</span><span class="pln"> </span><span class="atn">p:host-name</span><span class="pun">=</span><span class="atv">"server"</span><span class="pln"> </span><span class="atn">p:port</span><span class="pun">=</span><span class="atv">"6379"</span><span class="tag">/&gt;</span><span class="pln">

</span><span class="tag">&lt;/beans&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The configuration is quite similar to Jedis, with one notable exception. By default, the <code>JedisConnectionFactory</code> pools connections. In order to use a connection pool with JRedis, configure the <code>JredisConnectionFactory</code> with an instance of <code>JredisPool</code>. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-xml" data-lang="xml"><span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">"UTF-8"</span><span class="pun">?&gt;</span><span class="pln">
</span><span class="tag">&lt;beans</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/beans"</span><span class="pln">
  </span><span class="atn">xmlns:xsi</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln">
  </span><span class="atn">xsi:schemaLocation</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="tag">&gt;</span><span class="pln">

  </span><span class="tag">&lt;bean</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"jredisConnectionFactory"</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"org.springframework.data.redis.connection.jredis.JredisConnectionFactory"</span><span class="tag">&gt;</span><span class="pln">
    </span><span class="tag">&lt;constructor-arg&gt;</span><span class="pln">
      </span><span class="tag">&lt;bean</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"org.springframework.data.redis.connection.jredis.DefaultJredisPool"</span><span class="tag">&gt;</span><span class="pln">
        </span><span class="tag">&lt;constructor-arg</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"localhost"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">
        </span><span class="tag">&lt;constructor-arg</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"6379"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">
      </span><span class="tag">&lt;/bean&gt;</span><span class="pln">
    </span><span class="tag">&lt;/constructor-arg&gt;</span><span class="pln">
  </span><span class="tag">&lt;/bean&gt;</span><span class="pln">

</span><span class="tag">&lt;/beans&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="redis:connectors:srp"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:connectors:srp"></a>5.3.4. Configuring SRP connector (Deprecated since 1.7)</h4>
<div class="paragraph">
<p><a href="https://github.com/spullara/redis-protocol">SRP</a> (an acronym for Sam’s Redis Protocol) is the third open-source connector supported by Spring Data Redis through the <code>org.springframework.data.redis.connection.srp</code> package.</p>
</div>
<div class="paragraph">
<p>By now, its configuration is probably easy to guess:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-xml" data-lang="xml"><span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">"UTF-8"</span><span class="pun">?&gt;</span><span class="pln">
</span><span class="tag">&lt;beans</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/beans"</span><span class="pln">
  </span><span class="atn">xmlns:xsi</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln">
  </span><span class="atn">xmlns:p</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/p"</span><span class="pln"> </span><span class="atn">xsi:schemaLocation</span><span class="pun">=</span><span class="atv">"
  http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="tag">&gt;</span><span class="pln">

  </span><span class="tag">&lt;bean</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"srpConnectionFactory"</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"org.springframework.data.redis.connection.srp.SrpConnectionFactory"</span><span class="pln"> </span><span class="atn">p:host-name</span><span class="pun">=</span><span class="atv">"server"</span><span class="pln"> </span><span class="atn">p:port</span><span class="pun">=</span><span class="atv">"6379"</span><span class="tag">/&gt;</span><span class="pln">

</span><span class="tag">&lt;/beans&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Needless to say, the configuration is quite similar to that of the other connectors.</p>
</div>
</div>
<div class="sect3">
<h4 id="redis:connectors:lettuce"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:connectors:lettuce"></a>5.3.5. Configuring Lettuce connector</h4>
<div class="paragraph">
<p><a href="https://github.com/mp911de/lettuce">Lettuce</a> is the fourth open-source connector supported by Spring Data Redis through the <code>org.springframework.data.redis.connection.lettuce</code> package.</p>
</div>
<div class="paragraph">
<p>Its configuration is probably easy to guess:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-xml" data-lang="xml"><span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">"UTF-8"</span><span class="pun">?&gt;</span><span class="pln">
</span><span class="tag">&lt;beans</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/beans"</span><span class="pln">
  </span><span class="atn">xmlns:xsi</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln">
  </span><span class="atn">xmlns:p</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/p"</span><span class="pln">
  </span><span class="atn">xsi:schemaLocation</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="tag">&gt;</span><span class="pln">

  </span><span class="tag">&lt;bean</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"lettuceConnectionFactory"</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory"</span><span class="pln"> </span><span class="atn">p:host-name</span><span class="pun">=</span><span class="atv">"server"</span><span class="pln"> </span><span class="atn">p:port</span><span class="pun">=</span><span class="atv">"6379"</span><span class="tag">/&gt;</span><span class="pln">

</span><span class="tag">&lt;/beans&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>There are also a few Lettuce-specific connection parameters that can be tweaked. By default, all <code>LettuceConnection</code> s created by the <code>LettuceConnectionFactory</code> share the same thread-safe native connection for all non-blocking and non-transactional operations. Set <code>shareNativeConnection</code> to false to use a dedicated connection each time. <code>LettuceConnectionFactory</code> can also be configured with a <code>LettucePool</code> to use for pooling blocking and transactional connections, or all connections if <code>shareNativeConnection</code> is set to false.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="redis:sentinel"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:sentinel"></a>5.4. Redis Sentinel Support</h3>
<div class="paragraph">
<p>For dealing with high available Redis there is support for <a href="http://redis.io/topics/sentinel">Redis Sentinel</a> using <code>RedisSentinelConfiguration</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Please note that currently only <a href="http://github.com/xetorthio/jedis">Jedis</a> and lettuce <a href="http://github.com/mp911de/lettuce">Lettuce</a> support Redis Sentinel.
</td>
</tr>
</tbody></table>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="com">/**
 * jedis
 */</span><span class="pln">
</span><span class="lit">@Bean</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="typ">RedisConnectionFactory</span><span class="pln"> jedisConnectionFactory</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="typ">RedisSentinelConfiguration</span><span class="pln"> sentinelConfig </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">RedisSentinelConfiguration</span><span class="pun">()</span><span class="pln"> </span><span class="pun">.</span><span class="pln">master</span><span class="pun">(</span><span class="str">"mymaster"</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">.</span><span class="pln">sentinel</span><span class="pun">(</span><span class="str">"127.0.0.1"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">26379</span><span class="pun">)</span><span class="pln"> </span><span class="pun">.</span><span class="pln">sentinel</span><span class="pun">(</span><span class="str">"127.0.0.1"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">26380</span><span class="pun">);</span><span class="pln">
  </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">JedisConnectionFactory</span><span class="pun">(</span><span class="pln">sentinelConfig</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="com">/**
 * lettuce
 */</span><span class="pln">
</span><span class="lit">@Bean</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="typ">RedisConnectionFactory</span><span class="pln"> lettuceConnectionFactory</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="typ">RedisSentinelConfiguration</span><span class="pln"> sentinelConfig </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">RedisSentinelConfiguration</span><span class="pun">().</span><span class="pln">master</span><span class="pun">(</span><span class="str">"mymaster"</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">.</span><span class="pln">sentinel</span><span class="pun">(</span><span class="str">"127.0.0.1"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">26379</span><span class="pun">)</span><span class="pln"> </span><span class="pun">.</span><span class="pln">sentinel</span><span class="pun">(</span><span class="str">"127.0.0.1"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">26380</span><span class="pun">);</span><span class="pln">
  </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">LettuceConnectionFactory</span><span class="pun">(</span><span class="pln">sentinelConfig</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>RedisSentinelConfiguration</code> can also be defined via <code>PropertySource</code>.</p>
</div>
<div class="ulist">
<div class="title">Configuration Properties</div>
<ul>
<li>
<p><code>spring.redis.sentinel.master</code>: name of the master node.</p>
</li>
<li>
<p><code>spring.redis.sentinel.nodes</code>: Comma delimited list of host:port pairs.</p>
</li>
</ul>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Sometimes direct interaction with the one of the Sentinels is required. Using <code>RedisConnectionFactory.getSentinelConnection()</code> or <code>RedisConnection.getSentinelCommands()</code> gives you access to the first active Sentinel configured.</p>
</div>
</div>
<div class="sect2">
<h3 id="redis:template"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:template"></a>5.5. Working with Objects through RedisTemplate</h3>
<div class="paragraph">
<p>Most users are likely to use <code>RedisTemplate</code> and its coresponding package <code>org.springframework.data.redis.core</code> - the template is in fact the central class of the Redis module due to its rich feature set. The template offers a high-level abstraction for Redis interactions. While <code>RedisConnection</code> offers low level methods that accept and return binary values (<code>byte</code> arrays), the template takes care of serialization and connection management, freeing the user from dealing with such details.</p>
</div>
<div class="paragraph">
<p>Moreover, the template provides operations views (following the grouping from Redis command <a href="http://redis.io/commands">reference</a>) that offer rich, generified interfaces for working against a certain type or certain key (through the <code>KeyBound</code> interfaces) as described below:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 80%;">
<caption class="title">Table 1. Operational views</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 66%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Interface</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><em>Key Type Operations</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ValueOperations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redis string (or value) operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ListOperations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redis list operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SetOperations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redis set operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZSetOperations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redis zset (or sorted set) operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HashOperations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redis hash operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HyperLogLogOperations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redis HyperLogLog operations like (pfadd, pfcount,…​)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><em>Key Bound Operations</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BoundValueOperations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redis string (or value) key bound operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BoundListOperations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redis list key bound operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BoundSetOperations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redis set key bound operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BoundZSetOperations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redis zset (or sorted set) key bound operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BoundHashOperations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redis hash key bound operations</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Once configured, the template is thread-safe and can be reused across multiple instances.</p>
</div>
<div class="paragraph">
<p>Out of the box, <code>RedisTemplate</code> uses a Java-based serializer for most of its operations. This means that any object written or read by the template will be serialized/deserialized through Java. The serialization mechanism can be easily changed on the template, and the Redis module offers several implementations available in the <code>org.springframework.data.redis.serializer</code> package - see <a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:serializer">Serializers</a> for more information. You can also set any of the serializers to null and use RedisTemplate with raw <code>byte</code> arrays by setting the <code>enableDefaultSerializer</code> property to false. Note that the template requires all keys to be non-null - values can be null as long as the underlying serializer accepts them; read the javadoc of each serializer for more information.</p>
</div>
<div class="paragraph">
<p>For cases where a certain template <strong>view</strong> is needed, declare the view as a dependency and inject the template: the container will automatically perform the conversion eliminating the <code>opsFor[X]</code> calls:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-xml" data-lang="xml"><span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">"UTF-8"</span><span class="pun">?&gt;</span><span class="pln">
</span><span class="tag">&lt;beans</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/beans"</span><span class="pln">
  </span><span class="atn">xmlns:xsi</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln">
  </span><span class="atn">xmlns:p</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/p"</span><span class="pln">
  </span><span class="atn">xsi:schemaLocation</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="tag">&gt;</span><span class="pln">

  </span><span class="tag">&lt;bean</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"jedisConnectionFactory"</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"org.springframework.data.redis.connection.jedis.JedisConnectionFactory"</span><span class="pln"> </span><span class="atn">p:use-pool</span><span class="pun">=</span><span class="atv">"true"</span><span class="tag">/&gt;</span><span class="pln">
  </span><span class="com">&lt;!-- redis template definition --&gt;</span><span class="pln">
  </span><span class="tag">&lt;bean</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"redisTemplate"</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"org.springframework.data.redis.core.RedisTemplate"</span><span class="pln"> </span><span class="atn">p:connection-factory-ref</span><span class="pun">=</span><span class="atv">"jedisConnectionFactory"</span><span class="tag">/&gt;</span><span class="pln">
  ...

</span><span class="tag">&lt;/beans&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Example</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="com">// inject the actual template</span><span class="pln">
  </span><span class="lit">@Autowired</span><span class="pln">
  </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">RedisTemplate</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> template</span><span class="pun">;</span><span class="pln">

  </span><span class="com">// inject the template as ListOperations</span><span class="pln">
  </span><span class="lit">@Resource</span><span class="pun">(</span><span class="pln">name</span><span class="pun">=</span><span class="str">"redisTemplate"</span><span class="pun">)</span><span class="pln">
  </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">ListOperations</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> listOps</span><span class="pun">;</span><span class="pln">

  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> addLink</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> userId</span><span class="pun">,</span><span class="pln"> URL url</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    listOps</span><span class="pun">.</span><span class="pln">leftPush</span><span class="pun">(</span><span class="pln">userId</span><span class="pun">,</span><span class="pln"> url</span><span class="pun">.</span><span class="pln">toExternalForm</span><span class="pun">());</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="redis:string"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:string"></a>5.6. String-focused convenience classes</h3>
<div class="paragraph">
<p>Since it’s quite common for the keys and values stored in Redis to be <code>java.lang.String</code>, the Redis modules provides two extensions to <code>RedisConnection</code> and <code>RedisTemplate</code>, respectively the <code>StringRedisConnection</code> (and its <code>DefaultStringRedisConnection</code> implementation) and <code>StringRedisTemplate</code> as a convenient one-stop solution for intensive String operations. In addition to being bound to <code>String</code> keys, the template and the connection use the <code>StringRedisSerializer</code> underneath which means the stored keys and values are human readable (assuming the same encoding is used both in Redis and your code). For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-xml" data-lang="xml"><span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">"UTF-8"</span><span class="pun">?&gt;</span><span class="pln">
</span><span class="tag">&lt;beans</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/beans"</span><span class="pln">
  </span><span class="atn">xmlns:xsi</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln">
  </span><span class="atn">xmlns:p</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/p"</span><span class="pln">
  </span><span class="atn">xsi:schemaLocation</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="tag">&gt;</span><span class="pln">

  </span><span class="tag">&lt;bean</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"jedisConnectionFactory"</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"org.springframework.data.redis.connection.jedis.JedisConnectionFactory"</span><span class="pln"> </span><span class="atn">p:use-pool</span><span class="pun">=</span><span class="atv">"true"</span><span class="tag">/&gt;</span><span class="pln">

  </span><span class="tag">&lt;bean</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"stringRedisTemplate"</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"org.springframework.data.redis.core.StringRedisTemplate"</span><span class="pln"> </span><span class="atn">p:connection-factory-ref</span><span class="pun">=</span><span class="atv">"jedisConnectionFactory"</span><span class="tag">/&gt;</span><span class="pln">
  ...
</span><span class="tag">&lt;/beans&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Example</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="lit">@Autowired</span><span class="pln">
  </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">StringRedisTemplate</span><span class="pln"> redisTemplate</span><span class="pun">;</span><span class="pln">

  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> addLink</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> userId</span><span class="pun">,</span><span class="pln"> URL url</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    redisTemplate</span><span class="pun">.</span><span class="pln">opsForList</span><span class="pun">().</span><span class="pln">leftPush</span><span class="pun">(</span><span class="pln">userId</span><span class="pun">,</span><span class="pln"> url</span><span class="pun">.</span><span class="pln">toExternalForm</span><span class="pun">());</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As with the other Spring templates, <code>RedisTemplate</code> and <code>StringRedisTemplate</code> allow the developer to talk directly to Redis through the <code>RedisCallback</code> interface. This gives complete control to the developer as it talks directly to the <code>RedisConnection</code>. Note that the callback receives an instance of <code>StringRedisConnection</code> when a <code>StringRedisTemplate</code> is used.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> useCallback</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  redisTemplate</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">RedisCallback</span><span class="pun">&lt;</span><span class="typ">Object</span><span class="pun">&gt;()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Object</span><span class="pln"> doInRedis</span><span class="pun">(</span><span class="typ">RedisConnection</span><span class="pln"> connection</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">DataAccessException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="typ">Long</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> connection</span><span class="pun">.</span><span class="pln">dbSize</span><span class="pun">();</span><span class="pln">
      </span><span class="com">// Can cast to StringRedisConnection if using a StringRedisTemplate</span><span class="pln">
      </span><span class="pun">((</span><span class="typ">StringRedisConnection</span><span class="pun">)</span><span class="pln">connection</span><span class="pun">).</span><span class="pln">set</span><span class="pun">(</span><span class="str">"key"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"value"</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
   </span><span class="pun">});</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="redis:serializer"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:serializer"></a>5.7. Serializers</h3>
<div class="paragraph">
<p>From the framework perspective, the data stored in Redis is just bytes. While Redis itself supports various types, for the most part these refer to the way the data is stored rather than what it represents. It is up to the user to decide whether the information gets translated into Strings or any other objects. The conversion between the user (custom) types and raw data (and vice-versa) is handled in Spring Data Redis through the <code>RedisSerializer</code> interface (package <code>org.springframework.data.redis.serializer</code>) which as the name implies, takes care of the serialization process. Multiple implementations are available out of the box, two of which have been already mentioned before in this documentation: the <code>StringRedisSerializer</code> and the <code>JdkSerializationRedisSerializer</code>. However one can use <code>OxmSerializer</code> for Object/XML mapping through Spring 3 <a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/html/oxm.html">OXM</a> support or either <code>JacksonJsonRedisSerializer</code>, <code>Jackson2JsonRedisSerializer</code> or `GenericJackson2JsonRedisSerializer for storing data in <a href="http://en.wikipedia.org/wiki/JSON">JSON</a> format. Do note that the storage format is not limited only to values - it can be used for keys, values or hashes without any restrictions.</p>
</div>
</div>
<div class="sect2">
<h3 id="pubsub"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#pubsub"></a>5.8. Redis Messaging/PubSub</h3>
<div class="paragraph">
<p>Spring Data provides dedicated messaging integration for Redis, very similar in functionality and naming to the JMS integration in Spring Framework; in fact, users familiar with the JMS support in Spring should feel right at home.</p>
</div>
<div class="paragraph">
<p>Redis messaging can be roughly divided into two areas of functionality, namely the production or publication and consumption or subscription of messages, hence the shortcut pubsub (Publish/Subscribe). The <code>RedisTemplate</code> class is used for message production. For asynchronous reception similar to Java EE’s message-driven bean style, Spring Data provides a dedicated message listener container that is used to create Message-Driven POJOs (MDPs) and for synchronous reception, the <code>RedisConnection</code> contract.</p>
</div>
<div class="paragraph">
<p>The package <code>org.springframework.data.redis.connection</code> and <code>org.springframework.data.redis.listener</code> provide the core functionality for using Redis messaging.</p>
</div>
<div class="sect3">
<h4 id="redis:pubsub:publish"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:pubsub:publish"></a>5.8.1. Sending/Publishing messages</h4>
<div class="paragraph">
<p>To publish a message, one can use, as with the other operations, either the low-level <code>RedisConnection</code> or the high-level <code>RedisTemplate</code>. Both entities offer the <code>publish</code> method that accepts as an argument the message that needs to be sent as well as the destination channel. While <code>RedisConnection</code> requires raw-data (array of bytes), the <code>RedisTemplate</code> allow arbitrary objects to be passed in as messages:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="com">// send message through connection RedisConnection con = ...</span><span class="pln">
</span><span class="kwd">byte</span><span class="pun">[]</span><span class="pln"> msg </span><span class="pun">=</span><span class="pln"> </span><span class="pun">...</span><span class="pln">
</span><span class="kwd">byte</span><span class="pun">[]</span><span class="pln"> channel </span><span class="pun">=</span><span class="pln"> </span><span class="pun">...</span><span class="pln">
con</span><span class="pun">.</span><span class="pln">publish</span><span class="pun">(</span><span class="pln">msg</span><span class="pun">,</span><span class="pln"> channel</span><span class="pun">);</span><span class="pln"> </span><span class="com">// send message through RedisTemplate</span><span class="pln">
</span><span class="typ">RedisTemplate</span><span class="pln"> template </span><span class="pun">=</span><span class="pln"> </span><span class="pun">...</span><span class="pln">
template</span><span class="pun">.</span><span class="pln">convertAndSend</span><span class="pun">(</span><span class="str">"hello!"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"world"</span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="redis:pubsub:subscribe"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:pubsub:subscribe"></a>5.8.2. Receiving/Subscribing for messages</h4>
<div class="paragraph">
<p>On the receiving side, one can subscribe to one or multiple channels either by naming them directly or by using pattern matching. The latter approach is quite useful as it not only allows multiple subscriptions to be created with one command but to also listen on channels not yet created at subscription time (as long as they match the pattern).</p>
</div>
<div class="paragraph">
<p>At the low-level, <code>RedisConnection</code> offers <code>subscribe</code> and <code>pSubscribe</code> methods that map the Redis commands for subscribing by channel respectively by pattern. Note that multiple channels or patterns can be used as arguments. To change the subscription of a connection or simply query whether it is listening or not, <code>RedisConnection</code> provides <code>getSubscription</code> and <code>isSubscribed</code> method.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Subscription commands in Spring Data Redis are blocking. That is, calling subscribe on a connection will cause the current thread to block as it will start waiting for messages - the thread will be released only if the subscription is canceled, that is an additional thread invokes <code>unsubscribe</code> or <code>pUnsubscribe</code> on the <strong>same</strong> connection. See <a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#null">message listener container</a> below for a solution to this problem.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>As mentioned above, once subscribed a connection starts waiting for messages. No other commands can be invoked on it except for adding new subscriptions or modifying/canceling the existing ones. That is, invoking anything other then <code>subscribe</code>, <code>pSubscribe</code>, <code>unsubscribe</code>, or <code>pUnsubscribe</code> is illegal and will throw an exception.</p>
</div>
<div class="paragraph">
<p>In order to subscribe for messages, one needs to implement the <code>MessageListener</code> callback: each time a new message arrives, the callback gets invoked and the user code executed through <code>onMessage</code> method. The interface gives access not only to the actual message but to the channel it has been received through and the pattern (if any) used by the subscription to match the channel. This information allows the callee to differentiate between various messages not just by content but also through data.</p>
</div>
<div class="sect4">
<h5 id="redis:pubsub:subscribe:containers"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:pubsub:subscribe:containers"></a>Message Listener Containers</h5>
<div class="paragraph">
<p>Due to its blocking nature, low-level subscription is not attractive as it requires connection and thread management for every single listener. To alleviate this problem, Spring Data offers <code>RedisMessageListenerContainer</code> which does all the heavy lifting on behalf of the user - users familiar with EJB and JMS should find the concepts familiar as it is designed as close as possible to the support in Spring Framework and its message-driven POJOs (MDPs)</p>
</div>
<div class="paragraph">
<p><code>RedisMessageListenerContainer</code> acts as a message listener container; it is used to receive messages from a Redis channel and drive the <code>MessageListener</code> s that are injected into it. The listener container is responsible for all threading of message reception and dispatches into the listener for processing. A message listener container is the intermediary between an MDP and a messaging provider, and takes care of registering to receive messages, resource acquisition and release, exception conversion and the like. This allows you as an application developer to write the (possibly complex) business logic associated with receiving a message (and reacting to it), and delegates boilerplate Redis infrastructure concerns to the framework.</p>
</div>
<div class="paragraph">
<p>Furthermore, to minimize the application footprint, <code>RedisMessageListenerContainer</code> allows one connection and one thread to be shared by multiple listeners even though they do not share a subscription. Thus no matter how many listeners or channels an application tracks, the runtime cost will remain the same through out its lifetime. Moreover, the container allows runtime configuration changes so one can add or remove listeners while an application is running without the need for restart. Additionally, the container uses a lazy subscription approach, using a <code>RedisConnection</code> only when needed - if all the listeners are unsubscribed, cleanup is automatically performed and the used thread released.</p>
</div>
<div class="paragraph">
<p>To help with the asynch manner of messages, the container requires a <code>java.util.concurrent.Executor</code> ( or Spring’s <code>TaskExecutor</code>) for dispatching the messages. Depending on the load, the number of listeners or the runtime environment, one should change or tweak the executor to better serve her needs - in particular in managed environments (such as app servers), it is highly recommended to pick a a proper <code>TaskExecutor</code> to take advantage of its runtime.</p>
</div>
</div>
<div class="sect4">
<h5 id="redis:pubsub:subscribe:adapter"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:pubsub:subscribe:adapter"></a>The MessageListenerAdapter</h5>
<div class="paragraph">
<p>The <code>MessageListenerAdapter</code> class is the final component in Spring’s asynchronous messaging support: in a nutshell, it allows you to expose almost <strong>any</strong> class as a MDP (there are of course some constraints).</p>
</div>
<div class="paragraph">
<p>Consider the following interface definition. Notice that although the interface doesn’t extend the <code>MessageListener</code> interface, it can still be used as a MDP via the use of the <code>MessageListenerAdapter</code> class. Notice also how the various message handling methods are strongly typed according to the <strong>contents</strong> of the various <code>Message</code> types that they can receive and handle. In addition, the channel or pattern to which a message is sent can be passed in to the method as the second argument of type String:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">MessageDelegate</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">void</span><span class="pln"> handleMessage</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> message</span><span class="pun">);</span><span class="pln">
  </span><span class="kwd">void</span><span class="pln"> handleMessage</span><span class="pun">(</span><span class="typ">Map</span><span class="pln"> message</span><span class="pun">);</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> handleMessage</span><span class="pun">(</span><span class="kwd">byte</span><span class="pun">[]</span><span class="pln"> message</span><span class="pun">);</span><span class="pln">
  </span><span class="kwd">void</span><span class="pln"> handleMessage</span><span class="pun">(</span><span class="typ">Serializable</span><span class="pln"> message</span><span class="pun">);</span><span class="pln">
  </span><span class="com">// pass the channel/pattern as well</span><span class="pln">
  </span><span class="kwd">void</span><span class="pln"> handleMessage</span><span class="pun">(</span><span class="typ">Serializable</span><span class="pln"> message</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> channel</span><span class="pun">);</span><span class="pln">
 </span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">DefaultMessageDelegate</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">MessageDelegate</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="com">// implementation elided for clarity...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In particular, note how the above implementation of the <code>MessageDelegate</code> interface (the above <code>DefaultMessageDelegate</code> class) has <strong>no</strong> Redis dependencies at all. It truly is a POJO that we will make into an MDP via the following configuration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-xml" data-lang="xml"><span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">"UTF-8"</span><span class="pun">?&gt;</span><span class="pln">
 </span><span class="tag">&lt;beans</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/beans"</span><span class="pln">
   </span><span class="atn">xmlns:xsi</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln">
   </span><span class="atn">xmlns:redis</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/redis"</span><span class="pln">
   </span><span class="atn">xsi:schemaLocation</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
   http://www.springframework.org/schema/redis http://www.springframework.org/schema/redis/spring-redis.xsd"</span><span class="tag">&gt;</span><span class="pln">

</span><span class="com">&lt;!-- the default ConnectionFactory --&gt;</span><span class="pln">
</span><span class="tag">&lt;redis:listener-container&gt;</span><span class="pln">
  </span><span class="com">&lt;!-- the method attribute can be skipped as the default method name is "handleMessage" --&gt;</span><span class="pln">
  </span><span class="tag">&lt;redis:listener</span><span class="pln"> </span><span class="atn">ref</span><span class="pun">=</span><span class="atv">"listener"</span><span class="pln"> </span><span class="atn">method</span><span class="pun">=</span><span class="atv">"handleMessage"</span><span class="pln"> </span><span class="atn">topic</span><span class="pun">=</span><span class="atv">"chatroom"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">
</span><span class="tag">&lt;/redis:listener-container&gt;</span><span class="pln">

</span><span class="tag">&lt;bean</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"listener"</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"redisexample.DefaultMessageDelegate"</span><span class="tag">/&gt;</span><span class="pln">
 ...
</span><span class="tag">&lt;beans&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The listener topic can be either a channel (e.g. <code>topic="chatroom"</code>) or a pattern (e.g. <code>topic="*room"</code>)
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The example above uses the Redis namespace to declare the message listener container and automatically register the POJOs as listeners. The full blown, <strong>beans</strong> definition is displayed below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-xml" data-lang="xml"><span class="tag">&lt;bean</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"messageListener"</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"org.springframework.data.redis.listener.adapter.MessageListenerAdapter"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;constructor-arg&gt;</span><span class="pln">
    </span><span class="tag">&lt;bean</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"redisexample.DefaultMessageDelegate"</span><span class="tag">/&gt;</span><span class="pln">
  </span><span class="tag">&lt;/constructor-arg&gt;</span><span class="pln">
</span><span class="tag">&lt;/bean&gt;</span><span class="pln">

</span><span class="tag">&lt;bean</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"redisContainer"</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"org.springframework.data.redis.listener.RedisMessageListenerContainer"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;property</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"connectionFactory"</span><span class="pln"> </span><span class="atn">ref</span><span class="pun">=</span><span class="atv">"connectionFactory"</span><span class="tag">/&gt;</span><span class="pln">
  </span><span class="tag">&lt;property</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"messageListeners"</span><span class="tag">&gt;</span><span class="pln">
    </span><span class="tag">&lt;map&gt;</span><span class="pln">
      </span><span class="tag">&lt;entry</span><span class="pln"> </span><span class="atn">key-ref</span><span class="pun">=</span><span class="atv">"messageListener"</span><span class="tag">&gt;</span><span class="pln">
        </span><span class="tag">&lt;bean</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"org.springframework.data.redis.listener.ChannelTopic"</span><span class="tag">&gt;</span><span class="pln">
          </span><span class="tag">&lt;constructor-arg</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"chatroom"</span><span class="tag">&gt;</span><span class="pln">
        </span><span class="tag">&lt;/bean&gt;</span><span class="pln">
      </span><span class="tag">&lt;/entry&gt;</span><span class="pln">
    </span><span class="tag">&lt;/map&gt;</span><span class="pln">
  </span><span class="tag">&lt;/property&gt;</span><span class="pln">
</span><span class="tag">&lt;/bean&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Each time a message is received, the adapter automatically performs translation (using the configured <code>RedisSerializer</code>) between the low-level format and the required object type transparently. Any exception caused by the method invocation is caught and handled by the container (by default, being logged).</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tx"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#tx"></a>5.9. Redis Transactions</h3>
<div class="paragraph">
<p>Redis provides support for <a href="http://redis.io/topics/transactions">transactions</a> through the <code>multi</code>, <code>exec</code>, and <code>discard</code> commands. These operations are available on <code>RedisTemplate</code>, however <code>RedisTemplate</code> is not guaranteed to execute all operations in the transaction using the same connection.</p>
</div>
<div class="paragraph">
<p>Spring Data Redis provides the <code>SessionCallback</code> interface for use when multiple operations need to be performed with the same <code>connection</code>, as when using Redis transactions. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="com">//execute a transaction</span><span class="pln">
</span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Object</span><span class="pun">&gt;</span><span class="pln"> txResults </span><span class="pun">=</span><span class="pln"> redisTemplate</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">SessionCallback</span><span class="pun">&lt;</span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Object</span><span class="pun">&gt;&gt;()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Object</span><span class="pun">&gt;</span><span class="pln"> execute</span><span class="pun">(</span><span class="typ">RedisOperations</span><span class="pln"> operations</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">DataAccessException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    operations</span><span class="pun">.</span><span class="pln">multi</span><span class="pun">();</span><span class="pln">
    operations</span><span class="pun">.</span><span class="pln">opsForSet</span><span class="pun">().</span><span class="pln">add</span><span class="pun">(</span><span class="str">"key"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"value1"</span><span class="pun">);</span><span class="pln">

    </span><span class="com">// This will contain the results of all ops in the transaction</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> operations</span><span class="pun">.</span><span class="pln">exec</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">});</span><span class="pln">
</span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"Number of items added to set: "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> txResults</span><span class="pun">.</span><span class="pln">get</span><span class="pun">(</span><span class="lit">0</span><span class="pun">));</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>RedisTemplate</code> will use its value, hash key, and hash value serializers to deserialize all results of <code>exec</code> before returning. There is an additional <code>exec</code> method that allows you to pass a custom serializer for transaction results.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
An important change has been made to the <code>exec</code> methods of <code>RedisConnection</code> and <code>RedisTemplate</code> in version 1.1. Previously these methods returned the results of transactions directly from the connectors. This means that the data types often differed from those returned from the methods of <code>RedisConnection</code>. For example, <code>zAdd</code> returns a boolean indicating that the element has been added to the sorted set. Most connectors return this value as a long and Spring Data Redis performs the conversion. Another common difference is that most connectors return a status reply (usually the String "OK") for operations like <code>set</code>. These replies are typically discarded by Spring Data Redis. Prior to 1.1, these conversions were not performed on the results of <code>exec</code>. Also, results were not deserialized in <code>RedisTemplate</code>, so they often included raw byte arrays. If this change breaks your application, you can set <code>convertPipelineAndTxResults</code> to false on your <code>RedisConnectionFactory</code> to disable this behavior.
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="tx.spring"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#tx.spring"></a>5.9.1. @Transactional Support</h4>
<div class="paragraph">
<p>Transaction Support is disabled by default and has to be explicitly enabled for each <code>RedisTemplate</code> in use by setting <code>setEnableTransactionSupport(true)</code>. This will force binding the <code>RedisConnection</code> in use to the current <code>Thread</code> triggering <code>MULTI</code>. If the transaction finishes without errors, <code>EXEC</code> is called, otherwise <code>DISCARD</code>. Once in <code>MULTI</code>, <code>RedisConnection</code> would queue write operations, all <code>readonly</code> operations, such as <code>KEYS</code> are piped to a fresh (non thread bound) <code>RedisConnection</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="com">/** Sample Configuration **/</span><span class="pln">
</span><span class="lit">@Configuration</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">RedisTxContextConfiguration</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="lit">@Bean</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">StringRedisTemplate</span><span class="pln"> redisTemplate</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">StringRedisTemplate</span><span class="pln"> template </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">StringRedisTemplate</span><span class="pun">(</span><span class="pln">redisConnectionFactory</span><span class="pun">());</span><span class="pln">
    </span><span class="com">// explicitly enable transaction support</span><span class="pln">
    template</span><span class="pun">.</span><span class="pln">setEnableTransactionSupport</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> template</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="lit">@Bean</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">PlatformTransactionManager</span><span class="pln"> transactionManager</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">SQLException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">DataSourceTransactionManager</span><span class="pun">(</span><span class="pln">dataSource</span><span class="pun">());</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="lit">@Bean</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">RedisConnectionFactory</span><span class="pln"> redisConnectionFactory</span><span class="pun">(</span><span class="pln"> </span><span class="com">// jedis, lettuce, srp,... );</span><span class="pln">

  </span><span class="lit">@Bean</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">DataSource</span><span class="pln"> dataSource</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">SQLException</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="com">// ... }</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="com">/** Usage Constrainsts **/</span><span class="pln">

</span><span class="com">// executed on thread bound connection</span><span class="pln">
template</span><span class="pun">.</span><span class="pln">opsForValue</span><span class="pun">().</span><span class="pln">set</span><span class="pun">(</span><span class="str">"foo"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"bar"</span><span class="pun">);</span><span class="pln">

</span><span class="com">// read operation executed on a free (not tx-aware)</span><span class="pln">
connection template</span><span class="pun">.</span><span class="pln">keys</span><span class="pun">(</span><span class="str">"*"</span><span class="pun">);</span><span class="pln">

</span><span class="com">// returns null as values set within transaction are not visible</span><span class="pln">
template</span><span class="pun">.</span><span class="pln">opsForValue</span><span class="pun">().</span><span class="pln">get</span><span class="pun">(</span><span class="str">"foo"</span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pipeline"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#pipeline"></a>5.10. Pipelining</h3>
<div class="paragraph">
<p>Redis provides support for <a href="http://redis.io/topics/pipelining">pipelining</a>, which involves sending multiple commands to the server without waiting for the replies and then reading the replies in a single step. Pipelining can improve performance when you need to send several commands in a row, such as adding many elements to the same List.</p>
</div>
<div class="paragraph">
<p>Spring Data Redis provides several <code>RedisTemplate</code> methods for executing commands in a pipeline. If you don’t care about the results of the pipelined operations, you can use the standard <code>execute</code> method, passing <code>true</code> for the <code>pipeline</code> argument. The <code>executePipelined</code> methods will execute the provided <code>RedisCallback</code> or <code>SessionCallback</code> in a pipeline and return the results. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="com">//pop a specified number of items from a queue</span><span class="pln">
</span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Object</span><span class="pun">&gt;</span><span class="pln"> results </span><span class="pun">=</span><span class="pln"> stringRedisTemplate</span><span class="pun">.</span><span class="pln">executePipelined</span><span class="pun">(</span><span class="pln">
  </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">RedisCallback</span><span class="pun">&lt;</span><span class="typ">Object</span><span class="pun">&gt;()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Object</span><span class="pln"> doInRedis</span><span class="pun">(</span><span class="typ">RedisConnection</span><span class="pln"> connection</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">DataAccessException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="typ">StringRedisConnection</span><span class="pln"> stringRedisConn </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">StringRedisConnection</span><span class="pun">)</span><span class="pln">connection</span><span class="pun">;</span><span class="pln">
      </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">&lt;</span><span class="pln"> batchSize</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        stringRedisConn</span><span class="pun">.</span><span class="pln">rPop</span><span class="pun">(</span><span class="str">"myqueue"</span><span class="pun">);</span><span class="pln">
      </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">});</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The example above executes a bulk right pop of items from a queue in a pipeline. The <code>results</code> List contains all of the popped items. <code>RedisTemplate</code> uses its value, hash key, and hash value serializers to deserialize all results before returning, so the returned items in the above example will be Strings. There are additional <code>executePipelined</code> methods that allow you to pass a custom serializer for pipelined results.</p>
</div>
<div class="paragraph">
<p>Note that the value returned from the <code>RedisCallback</code> is required to be null, as this value is discarded in favor of returning the results of the pipelined commands.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
An important change has been made to the <code>closePipeline</code> method of <code>RedisConnection</code> in version 1.1. Previously this method returned the results of pipelined operations directly from the connectors. This means that the data types often differed from those returned by the methods of <code>RedisConnection</code>. For example, <code>zAdd</code> returns a boolean indicating that the element has been added to the sorted set. Most connectors return this value as a long and Spring Data Redis performs the conversion. Another common difference is that most connectors return a status reply (usually the String "OK") for operations like <code>set</code>. These replies are typically discarded by Spring Data Redis. Prior to 1.1, these conversions were not performed on the results of <code>closePipeline</code>. If this change breaks your application, you can set <code>convertPipelineAndTxResults</code> to false on your <code>RedisConnectionFactory</code> to disable this behavior.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="scripting"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#scripting"></a>5.11. Redis Scripting</h3>
<div class="paragraph">
<p>Redis versions 2.6 and higher provide support for execution of Lua scripts through the <a href="http://redis.io/commands/eval">eval</a> and <a href="http://redis.io/commands/evalsha">evalsha</a> commands. Spring Data Redis provides a high-level abstraction for script execution that handles serialization and automatically makes use of the Redis script cache.</p>
</div>
<div class="paragraph">
<p>Scripts can be run through the <code>execute</code> methods of <code>RedisTemplate</code>. RedisTemplate uses a configurable <code>ScriptExecutor</code> to execute the provided script. By default, the <code>ScriptExecutor</code> takes care of serializing the provided keys and arguments and deserializing the script result. This is done with the <code>RedisTemplate</code> key and value serializers. There is an additional <code>execute</code> method that allows you to pass custom serializers for the script arguments and result.</p>
</div>
<div class="paragraph">
<p>The default <code>ScriptExecutor</code> optimizes performance by retrieving the SHA1 of the script and attempting first to run <code>evalsha</code>, falling back to <code>eval</code> if the script is not yet present in the Redis script cache.</p>
</div>
<div class="paragraph">
<p>Here’s an example that executes a common "check-and-set" scenario using a Lua script. This is an ideal use case for a Redis script, as it requires that we execute a set of commands atomically and the behavior of one command is influenced by the result of another.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="lit">@Bean</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="typ">RedisScript</span><span class="pun">&lt;</span><span class="typ">Boolean</span><span class="pun">&gt;</span><span class="pln"> script</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="typ">DefaultRedisScript</span><span class="pun">&lt;</span><span class="typ">Boolean</span><span class="pun">&gt;</span><span class="pln"> redisScript </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">DefaultRedisScript</span><span class="pun">&lt;</span><span class="typ">Boolean</span><span class="pun">&gt;();</span><span class="pln">
  redisScript</span><span class="pun">.</span><span class="pln">setScriptSource</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ResourceScriptSource</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ClassPathResource</span><span class="pun">(</span><span class="str">"META-INF/scripts/checkandset.lua"</span><span class="pun">)));</span><span class="pln">
  redisScript</span><span class="pun">.</span><span class="pln">setResultType</span><span class="pun">(</span><span class="typ">Boolean</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Example</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="lit">@Autowired</span><span class="pln">
  </span><span class="typ">RedisScript</span><span class="pun">&lt;</span><span class="typ">Boolean</span><span class="pun">&gt;</span><span class="pln"> script</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> checkAndSet</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> expectedValue</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> newValue</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> redisTemplate</span><span class="pun">.</span><span class="pln">execute</span><span class="pun">(</span><span class="pln">script</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Collections</span><span class="pun">.</span><span class="pln">singletonList</span><span class="pun">(</span><span class="str">"key"</span><span class="pun">),</span><span class="pln"> expectedValue</span><span class="pun">,</span><span class="pln"> newValue</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-lua" data-lang="lua"><span class="pln"> </span><span class="pun">--</span><span class="pln"> checkandset</span><span class="pun">.</span><span class="pln">lua </span><span class="kwd">local</span><span class="pln">
 current </span><span class="pun">=</span><span class="pln"> redis</span><span class="pun">.</span><span class="pln">call</span><span class="pun">(</span><span class="str">'GET'</span><span class="pun">,</span><span class="pln"> KEYS</span><span class="pun">[</span><span class="lit">1</span><span class="pun">])</span><span class="pln">
 </span><span class="kwd">if</span><span class="pln"> current </span><span class="pun">==</span><span class="pln"> ARGV</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln">
   </span><span class="kwd">then</span><span class="pln"> redis</span><span class="pun">.</span><span class="pln">call</span><span class="pun">(</span><span class="str">'SET'</span><span class="pun">,</span><span class="pln"> KEYS</span><span class="pun">[</span><span class="lit">1</span><span class="pun">],</span><span class="pln"> ARGV</span><span class="pun">[</span><span class="lit">2</span><span class="pun">])</span><span class="pln">
   </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">
 </span><span class="kwd">end</span><span class="pln">
 </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The XML above configures a <code>DefaultRedisScript</code> pointing to a file called <code>checkandset.lua</code>, which is expected to return a boolean value. The script <code>resultType</code> should be one of <code>Long</code>, <code>Boolean</code>, <code>List</code>, or deserialized value type. It can also be null if the script returns a throw-away status (i.e "OK"). It is ideal to configure a single instance of <code>DefaultRedisScript</code> in your application context to avoid re-calculation of the script’s SHA1 on every script execution.</p>
</div>
<div class="paragraph">
<p>The checkAndSet method above then executes th
Scripts can be executed within a <code>SessionCallback</code> as part of a transaction or pipeline. See <a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#tx">Redis Transactions</a> and <a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#pipeline">Pipelining</a> for more information.</p>
</div>
<div class="paragraph">
<p>The scripting support provided by Spring Data Redis also allows you to schedule Redis scripts for periodic execution using the Spring Task and Scheduler abstractions. See the <code>Spring Framework</code> documentation for more details.</p>
</div>
</div>
<div class="sect2">
<h3 id="redis:support"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:support"></a>5.12. Support Classes</h3>
<div class="paragraph">
<p>Package <code>org.springframework.data.redis.support</code> offers various reusable components that rely on Redis as a backing store. Currently the package contains various JDK-based
interface implementations on top of Redis such as <a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/package-summary.html">atomic</a> counters and JDK
<a href="http://download.oracle.com/javase/6/docs/api/java/util/Collection.html">Collections</a>.</p>
</div>
<div class="paragraph">
<p>The atomic counters make it easy to wrap Redis key incrementation while the collections allow easy management of Redis keys with minimal storage exposure or API
leakage: in particular the <code>RedisSet</code> and <code>RedisZSet</code> interfaces offer easy access to the <strong>set</strong> operations supported by Redis such as <code>intersection</code> and <code>union</code>
while <code>RedisList</code> implements the <code>List</code>, <code>Queue</code> and <code>Deque</code> contracts (and their equivalent blocking siblings) on top of Redis, exposing the storage as a
<em>FIFO (First-In-First-Out)</em>, <em>LIFO (Last-In-First-Out)</em> or <em>capped collection</em> with minimal configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-xml" data-lang="xml"><span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">"UTF-8"</span><span class="pun">?&gt;</span><span class="pln">
</span><span class="tag">&lt;beans</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/beans"</span><span class="pln">
  </span><span class="atn">xmlns:xsi</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln">
  </span><span class="atn">xmlns:p</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/p"</span><span class="pln"> </span><span class="atn">xsi:schemaLocation</span><span class="pun">=</span><span class="atv">"
  http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="tag">&gt;</span><span class="pln">

  </span><span class="tag">&lt;bean</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"queue"</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"org.springframework.data.redis.support.collections.DefaultRedisList"</span><span class="tag">&gt;</span><span class="pln">
    </span><span class="tag">&lt;constructor-arg</span><span class="pln"> </span><span class="atn">ref</span><span class="pun">=</span><span class="atv">"redisTemplate"</span><span class="tag">/&gt;</span><span class="pln">
    </span><span class="tag">&lt;constructor-arg</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"queue-key"</span><span class="tag">/&gt;</span><span class="pln">
  </span><span class="tag">&lt;/bean&gt;</span><span class="pln">

</span><span class="tag">&lt;/beans&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">AnotherExample</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="com">// injected</span><span class="pln">
  </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Deque</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> queue</span><span class="pun">;</span><span class="pln">

  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> addTag</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> tag</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    queue</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">tag</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As shown in the example above, the consuming code is decoupled from the actual storage implementation - in fact there is no indication that Redis is used underneath. This makes moving from development to production environments transparent and highly increases testability (the Redis implementation can just as well be replaced with an in-memory one).</p>
</div>
<div class="sect3">
<h4 id="redis:support:cache-abstraction"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:support:cache-abstraction"></a>5.12.1. Support for Spring Cache Abstraction</h4>
<div class="paragraph">
<p>Spring Redis provides an implementation for Spring <a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/html/cache.html">cache abstraction</a> through the <code>org.springframework.data.redis.cache</code> package. To use Redis as a backing implementation, simply add <code>RedisCacheManager</code> to your configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-xml" data-lang="xml"><span class="tag">&lt;beans</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/beans"</span><span class="pln">
  </span><span class="atn">xmlns:xsi</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln">
  </span><span class="atn">xmlns:cache</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/cache"</span><span class="pln">
  </span><span class="atn">xmlns:c</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/c"</span><span class="pln">
  </span><span class="atn">xsi:schemaLocation</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd"</span><span class="tag">&gt;</span><span class="pln">

  </span><span class="com">&lt;!-- turn on declarative caching --&gt;</span><span class="pln">
  </span><span class="tag">&lt;cache:annotation-driven</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">

  </span><span class="com">&lt;!-- declare Redis Cache Manager --&gt;</span><span class="pln">
  </span><span class="tag">&lt;bean</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"cacheManager"</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"org.springframework.data.redis.cache.RedisCacheManager"</span><span class="pln"> </span><span class="atn">c:template-ref</span><span class="pun">=</span><span class="atv">"redisTemplate"</span><span class="tag">/&gt;</span><span class="pln">
</span><span class="tag">&lt;/beans&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
By default <code>RedisCacheManager</code> will lazily initialize <code>RedisCache</code> whenever a <code>Cache</code> is requested. This can be changed by predefining a <code>Set</code> of cache names.
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
By default <code>RedisCacheManager</code> will not participate in any ongoing transaction. Use <code>setTransactionAware</code> to enable transaction support.
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
By default <code>RedisCacheManager</code> does not prefix keys for cache regions, which can lead to an unexpected growth of a <code>ZSET</code> used to maintain known keys. It’s highly recommended to enable the usage of prefixes in order to avoid this unexpected growth and potential key clashes using more than one cache region.
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cluster"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#cluster"></a>6. Redis Cluster</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Working with <a href="http://redis.io/topics/cluster-spec">Redis Cluster</a> requires a Redis Server version 3.0+ and provides a very own set of features and capabilities. Please refer to the <a href="http://redis.io/topics/cluster-tutorial">Cluster Tutorial</a> for more information.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Redis Cluster is only supported by <a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:connectors:jedis">jedis</a> and <a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:connectors:lettuce">lettuce</a>.
</td>
</tr>
</tbody></table>
</div>
<div class="sect2">
<h3 id="_enabling_redis_cluster"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#_enabling_redis_cluster"></a>6.1. Enabling Redis Cluster</h3>
<div class="paragraph">
<p>Cluster support is based on the very same building blocks as non clustered communication. <code>RedisClusterConnection</code> an extension to <code>RedisConnection</code> handles the communication with the Redis Cluster and translates errors into the Spring DAO exception hierarchy.
<code>RedisClusterConnection</code> 's are created via the <code>RedisConnectionFactory</code> which has to be set up with the according <code>RedisClusterConfiguration</code>.</p>
</div>
<div class="exampleblock">
<div class="title">Example 1. Sample RedisConnectionFactory Configuration for Redis Cluster</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="lit">@Component</span><span class="pln">
</span><span class="lit">@ConfigurationProperties</span><span class="pun">(</span><span class="pln">prefix </span><span class="pun">=</span><span class="pln"> </span><span class="str">"spring.redis.cluster"</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">ClusterConfigurationProperties</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="com">/*
     * spring.redis.cluster.nodes[0] = 127.0.0.1:7379
     * spring.redis.cluster.nodes[1] = 127.0.0.1:7380
     * ...
     */</span><span class="pln">
    </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> nodes</span><span class="pun">;</span><span class="pln">

    </span><span class="com">/**
     * Get initial collection of known cluster nodes in format </span><span class="com">{@code host:port}.
     *
     * @return
     */</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> getNodes</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> nodes</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setNodes</span><span class="pun">(</span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> nodes</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">nodes </span><span class="pun">=</span><span class="pln"> nodes</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="lit">@Configuration</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">AppConfig</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="com">/**
     * Type safe representation of application.properties
     */</span><span class="pln">
    </span><span class="lit">@Autowired</span><span class="pln"> </span><span class="typ">ClusterConfigurationProperties</span><span class="pln"> clusterProperties</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="lit">@Bean</span><span class="pln"> </span><span class="typ">RedisConnectionFactory</span><span class="pln"> connectionFactory</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">JedisConnectionFactory</span><span class="pun">(</span><span class="pln">
            </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">RedisClusterConfiguration</span><span class="pun">(</span><span class="pln">clusterProperties</span><span class="pun">.</span><span class="pln">getNodes</span><span class="pun">()));</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>RedisClusterConfiguration</code> can also be defined via <code>PropertySource</code>.</p>
</div>
<div class="ulist">
<div class="title">Configuration Properties</div>
<ul>
<li>
<p><code>spring.redis.cluster.nodes</code>: Comma delimited list of host:port pairs.</p>
</li>
<li>
<p><code>spring.redis.cluster.max-redirects</code>: Number of allowed cluster redirections.</p>
</li>
</ul>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The initial configuration points driver libraries to an initial set of cluster nodes. Changes resulting from live cluster reconfiguration will only be kept in the native driver and not be written back to the configuration.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="_working_with_redis_cluster_connection"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#_working_with_redis_cluster_connection"></a>6.2. Working With Redis Cluster Connection</h3>
<div class="paragraph">
<p>As mentioned above Redis Cluster behaves different from single node Redis or even a Sentinel monitored master slave environment. This is reasoned by the automatic sharding that maps a key to one of 16384 slots which are distributed across the nodes. Therefore commands that involve more than one key must assert that all keys map to the exact same slot in order to avoid cross slot execution errors.
Further on, hence a single cluster node, only serves a dedicated set of keys, commands issued against one particular server only return results for those keys served by the server. As a very simple example take the <code>KEYS</code> command. When issued to a server in cluster environment it only returns the keys served by the node the request is sent to and not necessarily all keys within the cluster. So to get all keys in cluster environment it is necessary to read the keys from at least all known master nodes.</p>
</div>
<div class="paragraph">
<p>While redirects for to a specific keys to the corresponding slot serving node are handled by the driver libraries, higher level functions like collecting information across nodes, or sending commands to all nodes in the cluster that are covered by <code>RedisClusterConnection</code>. Picking up the keys example from just before, this means, that the <code>keys(pattern)</code> method picks up every master node in cluster and simultaneously executes the <code>KEYS</code> command on every single one, while picking up the results and returning the cumulated set of keys. To just request the keys of a single node <code>RedisClusterConnection</code> provides overloads for those (like <code>keys(node, pattern)</code> ).</p>
</div>
<div class="paragraph">
<p>A <code>RedisClusterNode</code> can be obtained from <code>RedisClusterConnection.clusterGetNodes</code> or it can be constructed using either host and port or the node Id.</p>
</div>
<div class="exampleblock">
<div class="title">Example 2. Sample of Running Commands Across the Cluster</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-text" data-lang="text"><span class="pln">redis</span><span class="pun">-</span><span class="pln">cli@127</span><span class="pun">.</span><span class="lit">0.0</span><span class="pun">.</span><span class="lit">1</span><span class="pun">:</span><span class="lit">7379</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> cluster nodes

</span><span class="lit">6b38bb</span><span class="pun">...</span><span class="pln"> </span><span class="lit">127.0</span><span class="pun">.</span><span class="lit">0.1</span><span class="pun">:</span><span class="lit">7379</span><span class="pln"> master </span><span class="pun">-</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">25</span><span class="pln"> connected </span><span class="lit">0</span><span class="pun">-</span><span class="lit">5460</span><span class="pln">                      </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="lit">7bb78c</span><span class="pun">...</span><span class="pln"> </span><span class="lit">127.0</span><span class="pun">.</span><span class="lit">0.1</span><span class="pun">:</span><span class="lit">7380</span><span class="pln"> master </span><span class="pun">-</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">1449730618304</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> connected </span><span class="lit">5461</span><span class="pun">-</span><span class="lit">10922</span><span class="pln">       </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
</span><span class="lit">164888.</span><span class="pun">..</span><span class="pln"> </span><span class="lit">127.0</span><span class="pun">.</span><span class="lit">0.1</span><span class="pun">:</span><span class="lit">7381</span><span class="pln"> master </span><span class="pun">-</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">1449730618304</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> connected </span><span class="lit">10923</span><span class="pun">-</span><span class="lit">16383</span><span class="pln">      </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
b8b5ee</span><span class="pun">...</span><span class="pln"> </span><span class="lit">127.0</span><span class="pun">.</span><span class="lit">0.1</span><span class="pun">:</span><span class="lit">7382</span><span class="pln"> slave </span><span class="lit">6b38bb</span><span class="pun">...</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">1449730618304</span><span class="pln"> </span><span class="lit">25</span><span class="pln"> connected          </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="typ">RedisClusterConnection</span><span class="pln"> connection </span><span class="pun">=</span><span class="pln"> connectionFactory</span><span class="pun">.</span><span class="pln">getClusterConnnection</span><span class="pun">();</span><span class="pln">

connection</span><span class="pun">.</span><span class="pln">set</span><span class="pun">(</span><span class="str">"foo"</span><span class="pun">,</span><span class="pln"> value</span><span class="pun">);</span><span class="pln">                                                  </span><i class="conum" data-value="5"></i><b><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></b><span class="pln">
connection</span><span class="pun">.</span><span class="pln">set</span><span class="pun">(</span><span class="str">"bar"</span><span class="pun">,</span><span class="pln"> value</span><span class="pun">);</span><span class="pln">                                                  </span><i class="conum" data-value="6"></i><b><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span></b><span class="pln">

connection</span><span class="pun">.</span><span class="pln">keys</span><span class="pun">(</span><span class="str">"*"</span><span class="pun">);</span><span class="pln">                                                          </span><i class="conum" data-value="7"></i><b><span class="pun">(</span><span class="lit">7</span><span class="pun">)</span></b><span class="pln">

connection</span><span class="pun">.</span><span class="pln">keys</span><span class="pun">(</span><span class="pln">NODE_7379</span><span class="pun">,</span><span class="pln"> </span><span class="str">"*"</span><span class="pun">);</span><span class="pln">                                               </span><i class="conum" data-value="8"></i><b><span class="pun">(</span><span class="lit">8</span><span class="pun">)</span></b><span class="pln">
connection</span><span class="pun">.</span><span class="pln">keys</span><span class="pun">(</span><span class="pln">NODE_7380</span><span class="pun">,</span><span class="pln"> </span><span class="str">"*"</span><span class="pun">);</span><span class="pln">                                               </span><i class="conum" data-value="9"></i><b><span class="pun">(</span><span class="lit">9</span><span class="pun">)</span></b><span class="pln">
connection</span><span class="pun">.</span><span class="pln">keys</span><span class="pun">(</span><span class="pln">NODE_7381</span><span class="pun">,</span><span class="pln"> </span><span class="str">"*"</span><span class="pun">);</span><span class="pln">                                               </span><i class="conum" data-value="10"></i><b><span class="pun">(</span><span class="lit">10</span><span class="pun">)</span></b><span class="pln">
connection</span><span class="pun">.</span><span class="pln">keys</span><span class="pun">(</span><span class="pln">NODE_7382</span><span class="pun">,</span><span class="pln"> </span><span class="str">"*"</span><span class="pun">);</span><span class="pln">                                               </span><i class="conum" data-value="11"></i><b><span class="pun">(</span><span class="lit">11</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Master node serving slots 0 to 5460 replicated to slave at 7382</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Master node serving slots 5461 to 10922</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Master node serving slots 10923 to 16383</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Slave node holding replicates of master at 7379</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Request routed to node at 7381 serving slot 12182</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Request routed to node at 7379 serving slot 5061</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Request routed to nodes at 7379, 7380, 7381 → [foo, bar]</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>Request routed to node at 7379 → [bar]</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>Request routed to node at 7380 → []</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td>Request routed to node at 7381 → [foo]</td>
</tr>
<tr>
<td><i class="conum" data-value="11"></i><b>11</b></td>
<td>Request routed to node at 7382 → [bar]</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="paragraph">
<p>Cross slot requests such as <code>MGET</code> are automatically served by the native driver library when all keys map to the same slot. However once this is not the case <code>RedisClusterConnection</code> executes multiple parallel <code>GET</code> commands against the slot serving nodes and again returns a cumulated result. Obviously this is less performing than the single slot execution and therefore should be used with care. In doubt please consider pinning keys to the same slot by providing a prefix in curly brackets like <code>{my-prefix}.foo</code> and <code>{my-prefix}.bar</code> which will both map to the same slot number.</p>
</div>
<div class="exampleblock">
<div class="title">Example 3. Sample of Cross Slot Request Handling</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-text" data-lang="text"><span class="pln">redis</span><span class="pun">-</span><span class="pln">cli@127</span><span class="pun">.</span><span class="lit">0.0</span><span class="pun">.</span><span class="lit">1</span><span class="pun">:</span><span class="lit">7379</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> cluster nodes

</span><span class="lit">6b38bb</span><span class="pun">...</span><span class="pln"> </span><span class="lit">127.0</span><span class="pun">.</span><span class="lit">0.1</span><span class="pun">:</span><span class="lit">7379</span><span class="pln"> master </span><span class="pun">-</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">25</span><span class="pln"> connected </span><span class="lit">0</span><span class="pun">-</span><span class="lit">5460</span><span class="pln">                      </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
</span><span class="lit">7bb</span><span class="pun">...</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="typ">RedisClusterConnection</span><span class="pln"> connection </span><span class="pun">=</span><span class="pln"> connectionFactory</span><span class="pun">.</span><span class="pln">getClusterConnnection</span><span class="pun">();</span><span class="pln">

connection</span><span class="pun">.</span><span class="pln">set</span><span class="pun">(</span><span class="str">"foo"</span><span class="pun">,</span><span class="pln"> value</span><span class="pun">);</span><span class="pln">         </span><span class="com">// slot: 12182</span><span class="pln">
connection</span><span class="pun">.</span><span class="pln">set</span><span class="pun">(</span><span class="str">"{foo}.bar"</span><span class="pun">,</span><span class="pln"> value</span><span class="pun">);</span><span class="pln">   </span><span class="com">// slot: 12182</span><span class="pln">
connection</span><span class="pun">.</span><span class="pln">set</span><span class="pun">(</span><span class="str">"bar"</span><span class="pun">,</span><span class="pln"> value</span><span class="pun">);</span><span class="pln">         </span><span class="com">// slot:  5461</span><span class="pln">

connection</span><span class="pun">.</span><span class="pln">mGet</span><span class="pun">(</span><span class="str">"foo"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"{foo}.bar"</span><span class="pun">);</span><span class="pln">                                           </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">

connection</span><span class="pun">.</span><span class="pln">mGet</span><span class="pun">(</span><span class="str">"foo"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"bar"</span><span class="pun">);</span><span class="pln">                                                 </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Same Configuration as in the sample before.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Keys map to same slot → 127.0.0.1:7381 MGET foo {foo}.bar</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Keys map to different slots and get split up into single slot ones routed to the according nodes<br>
→ 127.0.0.1:7379 GET bar<br>
→ 127.0.0.1:7381 GET foo</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The above provided simple examples to demonstrate the general strategy followed by Spring Data Redis. Be aware that some operations might require loading huge amounts of data into memory in order to compute the desired command. Additionally not all cross slot requests can safely be ported to multiple single slot requests and will error if misused (eg. <code>PFCOUNT</code> ).
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="_working_with_redistemplate_and_clusteroperations"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#_working_with_redistemplate_and_clusteroperations"></a>6.3. Working With RedisTemplate and ClusterOperations</h3>
<div class="paragraph">
<p>Please refer to the section <a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis:template">Working with Objects through RedisTemplate</a> to read about general purpose, configuration and usage of <code>RedisTemplate</code>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Please be careful when setting up <code>RedisTemplate#keySerializer</code> using any of the Json <code>RedisSerializers</code> as changing json structure has immediate influence on hash slot calculation.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><code>RedisTemplate</code> provides access to cluster specific operations via the <code>ClusterOperations</code> interface that can be obtained via <code>RedisTemplate.opsForCluster()</code>. This allows to execute commands explicitly on a single node within the cluster while retaining de-/serialization features configured for the template and provides administrative commands such as <code>CLUSTER MEET</code> or more high level operations for eg. resharding.</p>
</div>
<div class="exampleblock">
<div class="title">Example 4. Accessing RedisClusterConnection via RedisTemplate</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-text" data-lang="text"><span class="typ">ClusterOperations</span><span class="pln"> clusterOps </span><span class="pun">=</span><span class="pln"> redisTemplate</span><span class="pun">.</span><span class="pln">opsForCluster</span><span class="pun">();</span><span class="pln">
clusterOps</span><span class="pun">.</span><span class="pln">shutdown</span><span class="pun">(</span><span class="pln">NODE_7379</span><span class="pun">);</span><span class="pln">                                              </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Shut down node at 7379 and cross fingers there is a slave in place that can take over.</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="redis.repositories"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis.repositories"></a>7. Redis Repositories</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Working with Redis Repositories allows to seamlessly convert and store domain objects in Redis Hashes, apply custom mapping strategies and make use of secondary indexes.</p>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Redis Repositories requires at least Redis Server version 2.8.0.
</td>
</tr>
</tbody></table>
</div>
<div class="sect2">
<h3 id="redis.repositories.usage"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis.repositories.usage"></a>7.1. Usage</h3>
<div class="paragraph">
<p>To access domain entities stored in a Redis you can leverage repository support that eases implementing those quite significantly.</p>
</div>
<div class="exampleblock">
<div class="title">Example 5. Sample Person Entity</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="lit">@RedisHash</span><span class="pun">(</span><span class="str">"persons"</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="lit">@Id</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> id</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">String</span><span class="pln"> firstname</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">String</span><span class="pln"> lastname</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">Address</span><span class="pln"> address</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>We have a pretty simple domain object here. Note that it has a property named <code>id</code> annotated with <code>org.springframework.data.annotation.Id</code> and a <code>@RedisHash</code> annotation on its type.
Those two are responsible for creating the actual key used to persist the hash.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Properties annotated with <code>@Id</code> as well as those named <code>id</code> are considered as the identifier properties. Those with the annotation are favored over others.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>To now actually have a component responsible for storage and retrieval we need to define a repository interface.</p>
</div>
<div class="exampleblock">
<div class="title">Example 6. Basic Repository Interface To Persist Person Entities</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">PersonRepository</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">CrudRepository</span><span class="pun">&lt;</span><span class="typ">Person</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>As our repository extends <code>CrudRepository</code> it provides basic CRUD and finder operations. The thing we need in between to glue things together is the according Spring configuration.</p>
</div>
<div class="exampleblock">
<div class="title">Example 7. JavaConfig for Redis Repositories</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="lit">@Configuration</span><span class="pln">
</span><span class="lit">@EnableRedisRepositories</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">ApplicationConfig</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="lit">@Bean</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">RedisConnectionFactory</span><span class="pln"> connectionFactory</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">JedisConnectionFactory</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="lit">@Bean</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">RedisTemplate</span><span class="pun">&lt;?,</span><span class="pln"> </span><span class="pun">?&gt;</span><span class="pln"> redisTemplate</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="typ">RedisTemplate</span><span class="pun">&lt;</span><span class="kwd">byte</span><span class="pun">[],</span><span class="pln"> </span><span class="kwd">byte</span><span class="pun">[]&gt;</span><span class="pln"> template </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">RedisTemplate</span><span class="pun">&lt;</span><span class="kwd">byte</span><span class="pun">[],</span><span class="pln"> </span><span class="kwd">byte</span><span class="pun">[]&gt;();</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> template</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Given the setup above we can go on and inject <code>PersonRepository</code> into our components.</p>
</div>
<div class="exampleblock">
<div class="title">Example 8. Access to Person Entities</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="lit">@Autowired</span><span class="pln"> </span><span class="typ">PersonRepository</span><span class="pln"> repo</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> basicCrudOperations</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="typ">Person</span><span class="pln"> rand </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="str">"rand"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"al'thor"</span><span class="pun">);</span><span class="pln">
  rand</span><span class="pun">.</span><span class="pln">setAddress</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Address</span><span class="pun">(</span><span class="str">"emond's field"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"andor"</span><span class="pun">));</span><span class="pln">

  repo</span><span class="pun">.</span><span class="pln">save</span><span class="pun">(</span><span class="pln">rand</span><span class="pun">);</span><span class="pln">                                         </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">

  repo</span><span class="pun">.</span><span class="pln">findOne</span><span class="pun">(</span><span class="pln">rand</span><span class="pun">.</span><span class="pln">getId</span><span class="pun">());</span><span class="pln">                              </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">

  repo</span><span class="pun">.</span><span class="pln">count</span><span class="pun">();</span><span class="pln">                                            </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">

  repo</span><span class="pun">.</span><span class="kwd">delete</span><span class="pun">(</span><span class="pln">rand</span><span class="pun">);</span><span class="pln">                                       </span><i class="conum" data-value="4"></i><b><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Generates a new id if current value is <code>null</code> or reuses an already set id value and stores properties of type <code>Person</code> inside the Redis Hash with key with pattern <code>keyspace:id</code> in this case eg. <code>persons:5d67b7e1-8640-4475-beeb-c666fab4c0e5</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Uses the provided id to retrieve the object stored at <code>keyspace:id</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Counts the total number of entities available within the keyspace <em>persons</em> defined by <code>@RedisHash</code> on <code>Person</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Removes the key for the given object from Redis.</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="redis.repositories.mapping"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis.repositories.mapping"></a>7.2. Object to Hash Mapping</h3>
<div class="paragraph">
<p>The Redis Repository support persists Objects in Hashes. This requires an Object to Hash conversion which is done by a <code>RedisConverter</code>. The default implementation uses <code>Converter</code> for mapping property values to and from Redis native <code>byte[]</code>.</p>
</div>
<div class="paragraph">
<p>Given the <code>Person</code> type from the previous sections the default mapping looks like the following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-text" data-lang="text"><span class="pln">_class </span><span class="pun">=</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">example</span><span class="pun">.</span><span class="typ">Person</span><span class="pln">                 </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
id </span><span class="pun">=</span><span class="pln"> e2c7dcee</span><span class="pun">-</span><span class="pln">b8cd</span><span class="pun">-</span><span class="lit">4424</span><span class="pun">-</span><span class="lit">883e-736ce564363e</span><span class="pln">
firstname </span><span class="pun">=</span><span class="pln"> rand                            </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
lastname </span><span class="pun">=</span><span class="pln"> al</span><span class="pun">’</span><span class="pln">thor
address</span><span class="pun">.</span><span class="pln">city </span><span class="pun">=</span><span class="pln"> emond</span><span class="str">'s field                </span><i class="conum" data-value="3"></i><b><span class="str">(3)</span></b><span class="str">
address.country = andor</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>_class</code> attribute is included on root level as well as on any nested interface or abstract types.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Simple property values are mapped by path.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Properties of complex types are mapped by their dot path.</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. Default Mapping Rules</caption>
<colgroup>
<col style="width: 16%;">
<col style="width: 33%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Sample</th>
<th class="tableblock halign-left valign-top">Mapped Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Simple Type<br>
(eg. String)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String firstname = "rand";</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">firstname = "rand"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Complex Type<br>
(eg. Address)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Address adress = new Address("emond’s field");</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">address.city = "emond’s field"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">List<br>
of Simple Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List&lt;String&gt; nicknames = asList("dragon reborn", "lews therin");</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">nicknames.[0] = "dragon reborn",<br>
nicknames.[1] = "lews therin"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Map<br>
of Simple Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Map&lt;String, String&gt; atts = asMap({"eye-color", "grey"}, {"…​</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">atts.[eye-color] = "grey",<br>
atts.[hair-color] = "…​</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">List<br>
of Complex Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List&lt;Address&gt; addresses = asList(new Address("em…​</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">addresses.[0].city = "emond’s field",<br>
addresses.[1].city = "…​</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Map<br>
of Complex Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Map&lt;String, Address&gt; addresses = asMap({"home", new Address("em…​</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">addresses.[home].city = "emond’s field",<br>
addresses.[work].city = "…​</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Mapping behavior can be customized by registering the according <code>Converter</code> in <code>CustomConversions</code>. Those converters can take care of converting from/to a single <code>byte[]</code> as well as <code>Map&lt;String,byte[]&gt;</code> whereas the first one is suitable for eg. converting one complex type to eg. a binary JSON representation that still uses the default mappings hash structure. The second option offers full control over the resulting hash. Writing objects to a Redis hash will delete the content from the hash and re-create the whole hash, so not mapped data will be lost.</p>
</div>
<div class="exampleblock">
<div class="title">Example 9. Sample byte[] Converters</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="lit">@WritingConverter</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">AddressToBytesConverter</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Converter</span><span class="pun">&lt;</span><span class="typ">Address</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">byte</span><span class="pun">[]&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Jackson2JsonRedisSerializer</span><span class="pun">&lt;</span><span class="typ">Address</span><span class="pun">&gt;</span><span class="pln"> serializer</span><span class="pun">;</span><span class="pln">

  </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">AddressToBytesConverter</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    serializer </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Jackson2JsonRedisSerializer</span><span class="pun">&lt;</span><span class="typ">Address</span><span class="pun">&gt;(</span><span class="typ">Address</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span><span class="pln">
    serializer</span><span class="pun">.</span><span class="pln">setObjectMapper</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ObjectMapper</span><span class="pun">());</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="lit">@Override</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">byte</span><span class="pun">[]</span><span class="pln"> convert</span><span class="pun">(</span><span class="typ">Address</span><span class="pln"> value</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> serializer</span><span class="pun">.</span><span class="pln">serialize</span><span class="pun">(</span><span class="pln">value</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="lit">@ReadingConverter</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">BytesToAddressConverter</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Converter</span><span class="pun">&lt;</span><span class="kwd">byte</span><span class="pun">[],</span><span class="pln"> </span><span class="typ">Address</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Jackson2JsonRedisSerializer</span><span class="pun">&lt;</span><span class="typ">Address</span><span class="pun">&gt;</span><span class="pln"> serializer</span><span class="pun">;</span><span class="pln">

  </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">BytesToAddressConverter</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    serializer </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Jackson2JsonRedisSerializer</span><span class="pun">&lt;</span><span class="typ">Address</span><span class="pun">&gt;(</span><span class="typ">Address</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span><span class="pln">
    serializer</span><span class="pun">.</span><span class="pln">setObjectMapper</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ObjectMapper</span><span class="pun">());</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="lit">@Override</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Address</span><span class="pln"> convert</span><span class="pun">(</span><span class="kwd">byte</span><span class="pun">[]</span><span class="pln"> value</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> serializer</span><span class="pun">.</span><span class="pln">deserialize</span><span class="pun">(</span><span class="pln">value</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Using the above byte[] <code>Converter</code> produces eg.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-text" data-lang="text"><span class="pln">_class </span><span class="pun">=</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">example</span><span class="pun">.</span><span class="typ">Person</span><span class="pln">
id </span><span class="pun">=</span><span class="pln"> e2c7dcee</span><span class="pun">-</span><span class="pln">b8cd</span><span class="pun">-</span><span class="lit">4424</span><span class="pun">-</span><span class="lit">883e-736ce564363e</span><span class="pln">
firstname </span><span class="pun">=</span><span class="pln"> rand
lastname </span><span class="pun">=</span><span class="pln"> al</span><span class="pun">’</span><span class="pln">thor
address </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> city </span><span class="pun">:</span><span class="pln"> </span><span class="str">"emond's field"</span><span class="pun">,</span><span class="pln"> country </span><span class="pun">:</span><span class="pln"> </span><span class="str">"andor"</span><span class="pln"> </span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 10. Sample Map&lt;String,byte[]&gt; Converters</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="lit">@WritingConverter</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">AddressToMapConverter</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Converter</span><span class="pun">&lt;</span><span class="typ">Address</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">,</span><span class="kwd">byte</span><span class="pun">[]&gt;&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="lit">@Override</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">,</span><span class="kwd">byte</span><span class="pun">[]&gt;</span><span class="pln"> convert</span><span class="pun">(</span><span class="typ">Address</span><span class="pln"> source</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> singletonMap</span><span class="pun">(</span><span class="str">"ciudad"</span><span class="pun">,</span><span class="pln"> source</span><span class="pun">.</span><span class="pln">getCity</span><span class="pun">().</span><span class="pln">getBytes</span><span class="pun">());</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="lit">@ReadingConverter</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MapToAddressConverter</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Converter</span><span class="pun">&lt;</span><span class="typ">Address</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">byte</span><span class="pun">[]&gt;&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="lit">@Override</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Address</span><span class="pln"> convert</span><span class="pun">(</span><span class="typ">Map</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">,</span><span class="kwd">byte</span><span class="pun">[]&gt;</span><span class="pln"> source</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Address</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">String</span><span class="pun">(</span><span class="pln">source</span><span class="pun">.</span><span class="pln">get</span><span class="pun">(</span><span class="str">"ciudad"</span><span class="pun">)));</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Using the above Map <code>Converter</code> produces eg.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-text" data-lang="text"><span class="pln">_class </span><span class="pun">=</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">example</span><span class="pun">.</span><span class="typ">Person</span><span class="pln">
id </span><span class="pun">=</span><span class="pln"> e2c7dcee</span><span class="pun">-</span><span class="pln">b8cd</span><span class="pun">-</span><span class="lit">4424</span><span class="pun">-</span><span class="lit">883e-736ce564363e</span><span class="pln">
firstname </span><span class="pun">=</span><span class="pln"> rand
lastname </span><span class="pun">=</span><span class="pln"> al</span><span class="pun">’</span><span class="pln">thor
ciudad </span><span class="pun">=</span><span class="pln"> </span><span class="str">"emond's field"</span></code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Custom conversions have no effect on index resolution. <a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis.repositories.indexes">Secondary Indexes</a> will still be created even for custom converted types.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="redis.repositories.keyspaces"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis.repositories.keyspaces"></a>7.3. Keyspaces</h3>
<div class="paragraph">
<p>Keyspaces define prefixes used to create the actual <em>key</em> for the Redis Hash.
By default the prefix is set to <code>getClass().getName()</code>. This default can be altered via <code>@RedisHash</code> on aggregate root level or by setting up a programmatic configuration. However, the annotated keyspace supersedes any other configuration.</p>
</div>
<div class="exampleblock">
<div class="title">Example 11. Keyspace Setup via @EnableRedisRepositories</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="lit">@Configuration</span><span class="pln">
</span><span class="lit">@EnableRedisRepositories</span><span class="pun">(</span><span class="pln">keyspaceConfiguration </span><span class="pun">=</span><span class="pln"> </span><span class="typ">MyKeyspaceConfiguration</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">ApplicationConfig</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="com">//... RedisConnectionFactory and RedisTemplate Bean definitions omitted</span><span class="pln">

  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MyKeyspaceConfiguration</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">KeyspaceConfiguration</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">protected</span><span class="pln"> </span><span class="typ">Iterable</span><span class="pun">&lt;</span><span class="typ">KeyspaceSettings</span><span class="pun">&gt;</span><span class="pln"> initialConfiguration</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Collections</span><span class="pun">.</span><span class="pln">singleton</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">KeyspaceSettings</span><span class="pun">(</span><span class="typ">Person</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> </span><span class="str">"persons"</span><span class="pun">));</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 12. Programmatic Keyspace setup</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="lit">@Configuration</span><span class="pln">
</span><span class="lit">@EnableRedisRepositories</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">ApplicationConfig</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="com">//... RedisConnectionFactory and RedisTemplate Bean definitions omitted</span><span class="pln">

  </span><span class="lit">@Bean</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">RedisMappingContext</span><span class="pln"> keyValueMappingContext</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">RedisMappingContext</span><span class="pun">(</span><span class="pln">
      </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MappingConfiguration</span><span class="pun">(</span><span class="pln">
        </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MyKeyspaceConfiguration</span><span class="pun">(),</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">IndexConfiguration</span><span class="pun">()));</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MyKeyspaceConfiguration</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">KeyspaceConfiguration</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">protected</span><span class="pln"> </span><span class="typ">Iterable</span><span class="pun">&lt;</span><span class="typ">KeyspaceSettings</span><span class="pun">&gt;</span><span class="pln"> initialConfiguration</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Collections</span><span class="pun">.</span><span class="pln">singleton</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">KeyspaceSettings</span><span class="pun">(</span><span class="typ">Person</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> </span><span class="str">"persons"</span><span class="pun">));</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="redis.repositories.indexes"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis.repositories.indexes"></a>7.4. Secondary Indexes</h3>
<div class="paragraph">
<p><a href="http://redis.io/topics/indexes">Secondary indexes</a> are used to enable lookup operations based on native Redis structures. Values are written to the according indexes on every save and are removed when objects are deleted or <a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis.repositories.expirations">expire</a>.</p>
</div>
<div class="paragraph">
<p>Given the sample <code>Person</code> entity we can create an index for <em>firstname</em> by annotating the property with <code>@Indexed</code>.</p>
</div>
<div class="exampleblock">
<div class="title">Example 13. Annotation driven indexing</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="lit">@RedisHash</span><span class="pun">(</span><span class="str">"persons"</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="lit">@Id</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> id</span><span class="pun">;</span><span class="pln">
  </span><span class="lit">@Indexed</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> firstname</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">String</span><span class="pln"> lastname</span><span class="pun">;</span><span class="pln">
  </span><span class="typ">Address</span><span class="pln"> address</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Indexes are built up for actual property values. Saving two Persons eg. "rand" and "aviendha" results in setting up indexes like below.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-text" data-lang="text"><span class="pln">SADD persons</span><span class="pun">:</span><span class="pln">firstname</span><span class="pun">:</span><span class="pln">rand e2c7dcee</span><span class="pun">-</span><span class="pln">b8cd</span><span class="pun">-</span><span class="lit">4424</span><span class="pun">-</span><span class="lit">883e-736ce564363e</span><span class="pln">
SADD persons</span><span class="pun">:</span><span class="pln">firstname</span><span class="pun">:</span><span class="pln">aviendha a9d4b3a0</span><span class="pun">-</span><span class="lit">50d3</span><span class="pun">-</span><span class="lit">4538</span><span class="pun">-</span><span class="pln">a2fc</span><span class="pun">-</span><span class="pln">f7fc2581ee56</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>It is also possible to have indexes on nested elements. Assume <code>Address</code> has a <em>city</em> property that is annotated with <code>@Indexed</code>. In that case, once <code>person.address.city</code> is not <code>null</code>, we have Sets for each city.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-text" data-lang="text"><span class="pln">SADD persons</span><span class="pun">:</span><span class="pln">address</span><span class="pun">.</span><span class="pln">city</span><span class="pun">:</span><span class="pln">tear e2c7dcee</span><span class="pun">-</span><span class="pln">b8cd</span><span class="pun">-</span><span class="lit">4424</span><span class="pun">-</span><span class="lit">883e-736ce564363e</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Further more the programmatic setup allows to define indexes on map keys and list properties.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="lit">@RedisHash</span><span class="pun">(</span><span class="str">"persons"</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="com">// ... other properties omitted</span><span class="pln">

  </span><span class="typ">Map</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">,</span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> attributes</span><span class="pun">;</span><span class="pln">      </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b><span class="pln">
  </span><span class="typ">Map</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">&gt;</span><span class="pln"> relatives</span><span class="pun">;</span><span class="pln">       </span><i class="conum" data-value="2"></i><b><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span></b><span class="pln">
  </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Address</span><span class="pun">&gt;</span><span class="pln"> addresses</span><span class="pun">;</span><span class="pln">            </span><i class="conum" data-value="3"></i><b><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span></b><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>SADD persons:attributes.map-key:map-value e2c7dcee-b8cd-4424-883e-736ce564363e</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>SADD persons:relatives.map-key.firstname:tam e2c7dcee-b8cd-4424-883e-736ce564363e</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>SADD persons:addresses.city:tear e2c7dcee-b8cd-4424-883e-736ce564363e</code></td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Indexes will not be resolved on <a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis.repositories.references">References</a>.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Same as with <em>keyspaces</em> it is possible to configure indexes without the need of annotating the actual domain type.</p>
</div>
<div class="exampleblock">
<div class="title">Example 14. Index Setup via @EnableRedisRepositories</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="lit">@Configuration</span><span class="pln">
</span><span class="lit">@EnableRedisRepositories</span><span class="pun">(</span><span class="pln">indexConfiguration </span><span class="pun">=</span><span class="pln"> </span><span class="typ">MyIndexConfiguration</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">ApplicationConfig</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="com">//... RedisConnectionFactory and RedisTemplate Bean definitions omitted</span><span class="pln">

  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MyIndexConfiguration</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">IndexConfiguration</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">protected</span><span class="pln"> </span><span class="typ">Iterable</span><span class="pun">&lt;</span><span class="typ">IndexDefinition</span><span class="pun">&gt;</span><span class="pln"> initialConfiguration</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Collections</span><span class="pun">.</span><span class="pln">singleton</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">SimpleIndexDefinition</span><span class="pun">(</span><span class="str">"persons"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"firstname"</span><span class="pun">));</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 15. Programmatic Index setup</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="lit">@Configuration</span><span class="pln">
</span><span class="lit">@EnableRedisRepositories</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">ApplicationConfig</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="com">//... RedisConnectionFactory and RedisTemplate Bean definitions omitted</span><span class="pln">

  </span><span class="lit">@Bean</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">RedisMappingContext</span><span class="pln"> keyValueMappingContext</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">RedisMappingContext</span><span class="pun">(</span><span class="pln">
      </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MappingConfiguration</span><span class="pun">(</span><span class="pln">
        </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">KeyspaceConfiguration</span><span class="pun">(),</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MyIndexConfiguration</span><span class="pun">()));</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MyIndexConfiguration</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">IndexConfiguration</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">protected</span><span class="pln"> </span><span class="typ">Iterable</span><span class="pun">&lt;</span><span class="typ">IndexDefinition</span><span class="pun">&gt;</span><span class="pln"> initialConfiguration</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Collections</span><span class="pun">.</span><span class="pln">singleton</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">SimpleIndexDefinition</span><span class="pun">(</span><span class="str">"persons"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"firstname"</span><span class="pun">));</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="redis.repositories.expirations"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis.repositories.expirations"></a>7.5. Time To Live</h3>
<div class="paragraph">
<p>Objects stored in Redis may only be valid for a certain amount of time. This is especially useful for persisting short lived objects in Redis without having to remove them manually when they reached their end of life.
The expiration time in seconds can be set via <code>@RedisHash(timeToLive=…​)</code> as well as via <code>KeyspaceSettings</code> (see <a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis.repositories.keyspaces">Keyspaces</a>).</p>
</div>
<div class="paragraph">
<p>More flexible expiration times can be set by using the <code>@TimeToLive</code> annotation on either a numeric property or method. However do not apply <code>@TimeToLive</code> on both a method and a property within the same class.</p>
</div>
<div class="exampleblock">
<div class="title">Example 16. Expirations</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">TimeToLiveOnProperty</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="lit">@Id</span><span class="pln">
  </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> id</span><span class="pun">;</span><span class="pln">

  </span><span class="lit">@TimeToLive</span><span class="pln">
  </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Long</span><span class="pln"> expiration</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">TimeToLiveOnMethod</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="lit">@Id</span><span class="pln">
  </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> id</span><span class="pun">;</span><span class="pln">

  </span><span class="lit">@TimeToLive</span><span class="pln">
  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> getTimeToLive</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  	</span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Random</span><span class="pun">().</span><span class="pln">nextLong</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The repository implementation ensures subscription to <a href="http://redis.io/topics/notifications">Redis keyspace notifications</a> via <code>RedisMessageListenerContainer</code>.</p>
</div>
<div class="paragraph">
<p>When the expiration is set to a positive value the according <code>EXPIRE</code> command is executed.
Additionally to persisting the original, a <em>phantom</em> copy is persisted in Redis and set to expire 5 minutes after the original one. This is done to enable the Repository support to publish <code>RedisKeyExpiredEvent</code> holding the expired value via Springs <code>ApplicationEventPublisher</code> whenever a key expires even though the original values have already been gone. Expiry events
will be received on all connected applications using Spring Data Redis repositories.</p>
</div>
<div class="paragraph">
<p>By default, the key expiry listener is disabled when initializing the application. The startup mode can be adjusted in <code>@EnableRedisRepositories</code> or <code>RedisKeyValueAdapter</code> to start the listener with the application or upon the first insert of an entity with a TTL. See <code>EnableKeyspaceEvents</code> for possible values.</p>
</div>
<div class="paragraph">
<p>The <code>RedisKeyExpiredEvent</code> will hold a copy of the actually expired domain object as well as the key.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Delaying or disabling the expiry event listener startup impacts <code>RedisKeyExpiredEvent</code> publishing.
A disabled event listener will not publish expiry events. A delayed startup can cause loss of events because the delayed
listener initialization.
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The keyspace notification message listener will alter <code>notify-keyspace-events</code> settings in Redis if those are not already set. Existing settings will not be overridden, so it is left to the user to set those up correctly when not leaving them empty. Please note that <code>CONFIG</code> is disabled on AWS ElastiCache and enabling the listener leads to an error.
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Redis Pub/Sub messages are not persistent. If a key expires while the application is down the expiry event will not be processed which may lead to secondary indexes containing still references to the expired object.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="redis.repositories.references"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis.repositories.references"></a>7.6. Persisting References</h3>
<div class="paragraph">
<p>Marking properties with <code>@Reference</code> allows storing a simple key reference instead of copying values into the hash itself.
On loading from Redis, references are resolved automatically and mapped back into the object.</p>
</div>
<div class="exampleblock">
<div class="title">Example 17. Sample Property Reference</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-text" data-lang="text"><span class="pln">_class </span><span class="pun">=</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">example</span><span class="pun">.</span><span class="typ">Person</span><span class="pln">
id </span><span class="pun">=</span><span class="pln"> e2c7dcee</span><span class="pun">-</span><span class="pln">b8cd</span><span class="pun">-</span><span class="lit">4424</span><span class="pun">-</span><span class="lit">883e-736ce564363e</span><span class="pln">
firstname </span><span class="pun">=</span><span class="pln"> rand
lastname </span><span class="pun">=</span><span class="pln"> al</span><span class="pun">’</span><span class="pln">thor
mother </span><span class="pun">=</span><span class="pln"> persons</span><span class="pun">:</span><span class="pln">a9d4b3a0</span><span class="pun">-</span><span class="lit">50d3</span><span class="pun">-</span><span class="lit">4538</span><span class="pun">-</span><span class="pln">a2fc</span><span class="pun">-</span><span class="pln">f7fc2581ee56      </span><i class="conum" data-value="1"></i><b><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span></b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Reference stores the whole key (<code>keyspace:id</code>) of the referenced object.</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Referenced Objects are not subject of persisting changes when saving the referencing object. Please make sure to persist changes on referenced objects separately, since only the reference will be stored.
Indexes set on properties of referenced types will not be resolved.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="redis.repositories.queries"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis.repositories.queries"></a>7.7. Queries and Query Methods</h3>
<div class="paragraph">
<p>Query methods allow automatic derivation of simple finder queries from the method name.</p>
</div>
<div class="exampleblock">
<div class="title">Example 18. Sample Repository finder Method</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">PersonRepository</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">CrudRepository</span><span class="pun">&lt;</span><span class="typ">Person</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Person</span><span class="pun">&gt;</span><span class="pln"> findByFirstname</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> firstname</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Please make sure properties used in finder methods are set up for indexing.
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Query methods for Redis repositories support only queries for entities and collections of entities with paging.
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Using derived query methods might not always be sufficient to model the queries to execute. <code>RedisCallback</code> offers more control over the actual matching of index structures or even custom added ones. All it takes is providing a <code>RedisCallback</code> that returns a single or <code>Iterable</code> set of <em>id</em> values.</p>
</div>
<div class="exampleblock">
<div class="title">Example 19. Sample finder using RedisCallback</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="typ">String</span><span class="pln"> user </span><span class="pun">=</span><span class="pln"> </span><span class="com">//...</span><span class="pln">

</span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">RedisSession</span><span class="pun">&gt;</span><span class="pln"> sessionsByUser </span><span class="pun">=</span><span class="pln"> template</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">RedisCallback</span><span class="pun">&lt;</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="kwd">byte</span><span class="pun">[]&gt;&gt;()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Set</span><span class="pun">&lt;</span><span class="kwd">byte</span><span class="pun">[]&gt;</span><span class="pln"> doInRedis</span><span class="pun">(</span><span class="typ">RedisConnection</span><span class="pln"> connection</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">DataAccessException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> connection
      </span><span class="pun">.</span><span class="pln">sMembers</span><span class="pun">(</span><span class="str">"sessions:securityContext.authentication.principal.username:"</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> user</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}},</span><span class="pln"> </span><span class="typ">RedisSession</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Here’s an overview of the keywords supported for Redis and what a method containing that keyword essentially translates to.</p>
</div>
<div class="exampleblock">
<div class="content">
<table class="tableblock frame-all grid-all">
<caption class="title">Table 3. Supported keywords inside method names</caption>
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Keyword</th>
<th class="tableblock halign-left valign-top">Sample</th>
<th class="tableblock halign-left valign-top">Redis snippet</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>And</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>findByLastnameAndFirstname</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SINTER …:firstname:rand …:lastname:al’thor</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Or</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>findByLastnameOrFirstname</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SUNION …:firstname:rand …:lastname:al’thor</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Is,Equals</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>findByFirstname</code>,<code>findByFirstnameIs</code>,<code>findByFirstnameEquals</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SINTER …:firstname:rand</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Top,First</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>findFirst10ByFirstname</code>,<code>findTop5ByFirstname</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="redis.repositories.cluster"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis.repositories.cluster"></a>7.8. Redis Repositories running on Cluster</h3>
<div class="paragraph">
<p>Using the Redis repository support in a clustered Redis environment is fine. Please see the <a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#cluster">Redis Cluster</a> section for <code>ConnectionFactory</code> configuration details.
Still some considerations have to be done as the default key distribution will spread entities and secondary indexes through out the whole cluster and its slots.</p>
</div>
<table class="tableblock frame-all grid-all">
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">key</th>
<th class="tableblock halign-left valign-top">type</th>
<th class="tableblock halign-left valign-top">slot</th>
<th class="tableblock halign-left valign-top">node</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">persons:e2c7dcee-b8cd-4424-883e-736ce564363e</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">id for hash</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15171</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">127.0.0.1:7381</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">persons:a9d4b3a0-50d3-4538-a2fc-f7fc2581ee56</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">id for hash</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7373</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">127.0.0.1:7380</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">persons:firstname:rand</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">index</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1700</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">127.0.0.1:7379</p></td>
</tr>
</tbody>
</table>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Some commands like <code>SINTER</code> and <code>SUNION</code> can only be processed on the Server side when all involved keys map to the same slot. Otherwise computation has to be done on client side.
Therefore it be useful to pin keyspaces to a single slot which allows to make use of Redis serverside computation right away.</p>
</div>
<table class="tableblock frame-all grid-all">
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">key</th>
<th class="tableblock halign-left valign-top">type</th>
<th class="tableblock halign-left valign-top">slot</th>
<th class="tableblock halign-left valign-top">node</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{persons}:e2c7dcee-b8cd-4424-883e-736ce564363e</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">id for hash</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2399</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">127.0.0.1:7379</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{persons}:a9d4b3a0-50d3-4538-a2fc-f7fc2581ee56</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">id for hash</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2399</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">127.0.0.1:7379</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{persons}:firstname:rand</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">index</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2399</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">127.0.0.1:7379</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Define and pin keyspaces via `@RedisHash("{yourkeyspace}") to specific slots when using Redis cluster.
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="redis.repositories.cdi-integration"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#redis.repositories.cdi-integration"></a>7.9. CDI integration</h3>
<div class="paragraph">
<p>Instances of the repository interfaces are usually created by a container, which Spring is the most natural choice when working with Spring Data. There’s sophisticated support to easily set up Spring to create bean instances. Spring Data Redis ships with a custom CDI extension that allows using the repository abstraction in CDI environments. The extension is part of the JAR so all you need to do to activate it is dropping the Spring Data Redis JAR into your classpath.</p>
</div>
<div class="paragraph">
<p>You can now set up the infrastructure by implementing a CDI Producer for the <code>RedisConnectionFactory</code> and <code>RedisOperations</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="kwd">class</span><span class="pln"> </span><span class="typ">RedisOperationsProducer</span><span class="pln"> </span><span class="pun">{</span><span class="pln">


  </span><span class="lit">@Produces</span><span class="pln">
  </span><span class="typ">RedisConnectionFactory</span><span class="pln"> redisConnectionFactory</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="typ">JedisConnectionFactory</span><span class="pln"> jedisConnectionFactory </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">JedisConnectionFactory</span><span class="pun">();</span><span class="pln">
    jedisConnectionFactory</span><span class="pun">.</span><span class="pln">setHostName</span><span class="pun">(</span><span class="str">"localhost"</span><span class="pun">);</span><span class="pln">
    jedisConnectionFactory</span><span class="pun">.</span><span class="pln">setPort</span><span class="pun">(</span><span class="lit">6379</span><span class="pun">);</span><span class="pln">
    jedisConnectionFactory</span><span class="pun">.</span><span class="pln">afterPropertiesSet</span><span class="pun">();</span><span class="pln">

    </span><span class="kwd">return</span><span class="pln"> jedisConnectionFactory</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">void</span><span class="pln"> disposeRedisConnectionFactory</span><span class="pun">(</span><span class="lit">@Disposes</span><span class="pln"> </span><span class="typ">RedisConnectionFactory</span><span class="pln"> redisConnectionFactory</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">Exception</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">redisConnectionFactory </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">DisposableBean</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="pun">((</span><span class="typ">DisposableBean</span><span class="pun">)</span><span class="pln"> redisConnectionFactory</span><span class="pun">).</span><span class="pln">destroy</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="lit">@Produces</span><span class="pln">
  </span><span class="lit">@ApplicationScoped</span><span class="pln">
  </span><span class="typ">RedisOperations</span><span class="pun">&lt;</span><span class="kwd">byte</span><span class="pun">[],</span><span class="pln"> </span><span class="kwd">byte</span><span class="pun">[]&gt;</span><span class="pln"> redisOperationsProducer</span><span class="pun">(</span><span class="typ">RedisConnectionFactory</span><span class="pln"> redisConnectionFactory</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="typ">RedisTemplate</span><span class="pun">&lt;</span><span class="kwd">byte</span><span class="pun">[],</span><span class="pln"> </span><span class="kwd">byte</span><span class="pun">[]&gt;</span><span class="pln"> template </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">RedisTemplate</span><span class="pun">&lt;</span><span class="kwd">byte</span><span class="pun">[],</span><span class="pln"> </span><span class="kwd">byte</span><span class="pun">[]&gt;();</span><span class="pln">
    template</span><span class="pun">.</span><span class="pln">setConnectionFactory</span><span class="pun">(</span><span class="pln">redisConnectionFactory</span><span class="pun">);</span><span class="pln">
    template</span><span class="pun">.</span><span class="pln">afterPropertiesSet</span><span class="pun">();</span><span class="pln">

    </span><span class="kwd">return</span><span class="pln"> template</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The necessary setup can vary depending on the JavaEE environment you run in.</p>
</div>
<div class="paragraph">
<p>The Spring Data Redis CDI extension will pick up all Repositories available as CDI beans and create a proxy for a Spring Data repository whenever a bean of a repository type is requested by the container. Thus obtaining an instance of a Spring Data repository is a matter of declaring an <code>@Injected</code> property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-java" data-lang="java"><span class="kwd">class</span><span class="pln"> </span><span class="typ">RepositoryClient</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="lit">@Inject</span><span class="pln">
  </span><span class="typ">PersonRepository</span><span class="pln"> repository</span><span class="pun">;</span><span class="pln">

  </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> businessMethod</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Person</span><span class="pun">&gt;</span><span class="pln"> people </span><span class="pun">=</span><span class="pln"> repository</span><span class="pun">.</span><span class="pln">findAll</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A Redis Repository requires <code>RedisKeyValueAdapter</code> and <code>RedisKeyValueTemplate</code> instances. These beans are created and managed by the Spring Data CDI extension if no provided beans are found. You can however supply your own beans to configure the specific properties of <code>RedisKeyValueAdapter</code> and <code>RedisKeyValueTemplate</code>.</p>
</div>
</div>
</div>
</div>
<h1 id="appendixes" class="sect0"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#appendixes"></a>Appendixes</h1>
<div class="openblock partintro">
<div class="content">
<h2 id="_appendix_document_structure" class="float">Appendix Document structure</h2>
<div class="paragraph">
<p>Various appendixes outside the reference documentation.</p>
</div>
<div class="paragraph">
<p><a href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#appendix:schema">Schema</a> defines the schemas provided by Spring Data Redis.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendix:schema"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#appendix:schema"></a>Appendix A: Schema</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_core_schema"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#_core_schema"></a>Core schema</h3>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted"><code class="language-xml" data-lang="xml"><span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">"UTF-8"</span><span class="pun">?&gt;</span><span class="pln">

</span><span class="tag">&lt;xsd:schema</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/redis"</span><span class="pln">
    </span><span class="atn">xmlns:xsd</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema"</span><span class="pln">
    </span><span class="atn">xmlns:xsi</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln">
    </span><span class="atn">xmlns:tool</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/tool"</span><span class="pln">
    </span><span class="atn">targetNamespace</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/redis"</span><span class="pln">
    </span><span class="atn">elementFormDefault</span><span class="pun">=</span><span class="atv">"qualified"</span><span class="pln">
    </span><span class="atn">attributeFormDefault</span><span class="pun">=</span><span class="atv">"unqualified"</span><span class="tag">&gt;</span><span class="pln">

  </span><span class="tag">&lt;xsd:import</span><span class="pln"> </span><span class="atn">namespace</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/tool"</span><span class="pln"> </span><span class="atn">schemaLocation</span><span class="pun">=</span><span class="atv">"http://www.springframework.org/schema/tool/spring-tool.xsd"</span><span class="tag">/&gt;</span><span class="pln">

  </span><span class="tag">&lt;xsd:annotation&gt;</span><span class="pln">
    </span><span class="tag">&lt;xsd:documentation&gt;</span><span class="pln">&lt;![CDATA[
Defines the configuration elements for the Spring Data Redis support.
Allows for configuring Redis listener containers in XML 'shortcut' style.
    ]]&gt;</span><span class="tag">&lt;/xsd:documentation&gt;</span><span class="pln">
  </span><span class="tag">&lt;/xsd:annotation&gt;</span><span class="pln">

  </span><span class="tag">&lt;xsd:element</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"listener-container"</span><span class="tag">&gt;</span><span class="pln">
    </span><span class="tag">&lt;xsd:annotation&gt;</span><span class="pln">
      </span><span class="tag">&lt;xsd:documentation&gt;</span><span class="pln">&lt;![CDATA[
Container of Redis listeners. All listeners will be hosted by the same container.
      ]]&gt;</span><span class="tag">&lt;/xsd:documentation&gt;</span><span class="pln">
      </span><span class="tag">&lt;xsd:appinfo&gt;</span><span class="pln">
        </span><span class="tag">&lt;tool:annotation&gt;</span><span class="pln">
          </span><span class="tag">&lt;tool:exports</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"org.springframework.data.redis.listener.RedisMessageListenerContainer"</span><span class="tag">/&gt;</span><span class="pln">
        </span><span class="tag">&lt;/tool:annotation&gt;</span><span class="pln">
      </span><span class="tag">&lt;/xsd:appinfo&gt;</span><span class="pln">
    </span><span class="tag">&lt;/xsd:annotation&gt;</span><span class="pln">
    </span><span class="tag">&lt;xsd:complexType&gt;</span><span class="pln">
      </span><span class="tag">&lt;xsd:sequence&gt;</span><span class="pln">
        </span><span class="tag">&lt;xsd:element</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"listener"</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"listenerType"</span><span class="pln"> </span><span class="atn">minOccurs</span><span class="pun">=</span><span class="atv">"0"</span><span class="pln"> </span><span class="atn">maxOccurs</span><span class="pun">=</span><span class="atv">"unbounded"</span><span class="tag">/&gt;</span><span class="pln">
      </span><span class="tag">&lt;/xsd:sequence&gt;</span><span class="pln">
      </span><span class="tag">&lt;xsd:attribute</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"connection-factory"</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"xsd:string"</span><span class="pln"> </span><span class="atn">default</span><span class="pun">=</span><span class="atv">"redisConnectionFactory"</span><span class="tag">&gt;</span><span class="pln">
        </span><span class="tag">&lt;xsd:annotation&gt;</span><span class="pln">
          </span><span class="tag">&lt;xsd:documentation&gt;</span><span class="pln">&lt;![CDATA[
A reference to the Redis ConnectionFactory bean.
Default is "redisConnectionFactory".
          ]]&gt;</span><span class="tag">&lt;/xsd:documentation&gt;</span><span class="pln">
          </span><span class="tag">&lt;xsd:appinfo&gt;</span><span class="pln">
            </span><span class="tag">&lt;tool:annotation</span><span class="pln"> </span><span class="atn">kind</span><span class="pun">=</span><span class="atv">"ref"</span><span class="tag">&gt;</span><span class="pln">
              </span><span class="tag">&lt;tool:expected-type</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"org.springframework.data.redis.connection.ConnectionFactory"</span><span class="tag">/&gt;</span><span class="pln">
            </span><span class="tag">&lt;/tool:annotation&gt;</span><span class="pln">
          </span><span class="tag">&lt;/xsd:appinfo&gt;</span><span class="pln">
        </span><span class="tag">&lt;/xsd:annotation&gt;</span><span class="pln">
      </span><span class="tag">&lt;/xsd:attribute&gt;</span><span class="pln">
      </span><span class="tag">&lt;xsd:attribute</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"task-executor"</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"xsd:string"</span><span class="tag">&gt;</span><span class="pln">
        </span><span class="tag">&lt;xsd:annotation&gt;</span><span class="pln">
          </span><span class="tag">&lt;xsd:documentation&gt;</span><span class="pln">&lt;![CDATA[
A reference to a Spring TaskExecutor (or standard JDK 1.5 Executor) for executing
Redis listener invokers. Default is a SimpleAsyncTaskExecutor.
          ]]&gt;</span><span class="tag">&lt;/xsd:documentation&gt;</span><span class="pln">
          </span><span class="tag">&lt;xsd:appinfo&gt;</span><span class="pln">
            </span><span class="tag">&lt;tool:annotation</span><span class="pln"> </span><span class="atn">kind</span><span class="pun">=</span><span class="atv">"ref"</span><span class="tag">&gt;</span><span class="pln">
              </span><span class="tag">&lt;tool:expected-type</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"java.util.concurrent.Executor"</span><span class="tag">/&gt;</span><span class="pln">
            </span><span class="tag">&lt;/tool:annotation&gt;</span><span class="pln">
          </span><span class="tag">&lt;/xsd:appinfo&gt;</span><span class="pln">
        </span><span class="tag">&lt;/xsd:annotation&gt;</span><span class="pln">
      </span><span class="tag">&lt;/xsd:attribute&gt;</span><span class="pln">
      </span><span class="tag">&lt;xsd:attribute</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"subscription-task-executor"</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"xsd:string"</span><span class="tag">&gt;</span><span class="pln">
        </span><span class="tag">&lt;xsd:annotation&gt;</span><span class="pln">
          </span><span class="tag">&lt;xsd:documentation&gt;</span><span class="pln">&lt;![CDATA[
A reference to a Spring TaskExecutor (or standard JDK 1.5 Executor) for listening
to Redis messages. By default reuses the 'task-executor' value.
          ]]&gt;</span><span class="tag">&lt;/xsd:documentation&gt;</span><span class="pln">
          </span><span class="tag">&lt;xsd:appinfo&gt;</span><span class="pln">
            </span><span class="tag">&lt;tool:annotation</span><span class="pln"> </span><span class="atn">kind</span><span class="pun">=</span><span class="atv">"ref"</span><span class="tag">&gt;</span><span class="pln">
              </span><span class="tag">&lt;tool:expected-type</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"java.util.concurrent.Executor"</span><span class="tag">/&gt;</span><span class="pln">
            </span><span class="tag">&lt;/tool:annotation&gt;</span><span class="pln">
          </span><span class="tag">&lt;/xsd:appinfo&gt;</span><span class="pln">
        </span><span class="tag">&lt;/xsd:annotation&gt;</span><span class="pln">
      </span><span class="tag">&lt;/xsd:attribute&gt;</span><span class="pln">
      </span><span class="tag">&lt;xsd:attribute</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"topic-serializer"</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"xsd:string"</span><span class="tag">&gt;</span><span class="pln">
        </span><span class="tag">&lt;xsd:annotation&gt;</span><span class="pln">
          </span><span class="tag">&lt;xsd:documentation&gt;</span><span class="pln">&lt;![CDATA[
A reference to the RedisSerializer strategy for converting Redis channels/patterns to
serialized format. Default is a StringRedisSerializer.
          ]]&gt;</span><span class="tag">&lt;/xsd:documentation&gt;</span><span class="pln">
          </span><span class="tag">&lt;xsd:appinfo&gt;</span><span class="pln">
            </span><span class="tag">&lt;tool:annotation</span><span class="pln"> </span><span class="atn">kind</span><span class="pun">=</span><span class="atv">"ref"</span><span class="tag">&gt;</span><span class="pln">
              </span><span class="tag">&lt;tool:expected-type</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"org.springframework.data.redis.serializer.RedisSerializer"</span><span class="tag">/&gt;</span><span class="pln">
            </span><span class="tag">&lt;/tool:annotation&gt;</span><span class="pln">
          </span><span class="tag">&lt;/xsd:appinfo&gt;</span><span class="pln">
        </span><span class="tag">&lt;/xsd:annotation&gt;</span><span class="pln">
      </span><span class="tag">&lt;/xsd:attribute&gt;</span><span class="pln">
      </span><span class="tag">&lt;xsd:attribute</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"phase"</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"xsd:string"</span><span class="tag">&gt;</span><span class="pln">
        </span><span class="tag">&lt;xsd:annotation&gt;</span><span class="pln">
          </span><span class="tag">&lt;xsd:documentation&gt;</span><span class="pln">&lt;![CDATA[
The lifecycle phase within which this container should start and stop. The lower
the value the earlier this container will start and the later it will stop. The
default is Integer.MAX_VALUE meaning the container will start as late as possible
and stop as soon as possible.
          ]]&gt;</span><span class="tag">&lt;/xsd:documentation&gt;</span><span class="pln">
        </span><span class="tag">&lt;/xsd:annotation&gt;</span><span class="pln">
      </span><span class="tag">&lt;/xsd:attribute&gt;</span><span class="pln">
    </span><span class="tag">&lt;/xsd:complexType&gt;</span><span class="pln">
  </span><span class="tag">&lt;/xsd:element&gt;</span><span class="pln">

  </span><span class="tag">&lt;xsd:complexType</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"listenerType"</span><span class="tag">&gt;</span><span class="pln">
    </span><span class="tag">&lt;xsd:attribute</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"ref"</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"xsd:string"</span><span class="pln"> </span><span class="atn">use</span><span class="pun">=</span><span class="atv">"required"</span><span class="tag">&gt;</span><span class="pln">
      </span><span class="tag">&lt;xsd:annotation&gt;</span><span class="pln">
        </span><span class="tag">&lt;xsd:documentation&gt;</span><span class="pln">&lt;![CDATA[
  The bean name of the listener object, implementing
  the MessageListener interface or defining the specified listener method.
  Required.
        ]]&gt;</span><span class="tag">&lt;/xsd:documentation&gt;</span><span class="pln">
        </span><span class="tag">&lt;xsd:appinfo&gt;</span><span class="pln">
          </span><span class="tag">&lt;tool:annotation</span><span class="pln"> </span><span class="atn">kind</span><span class="pun">=</span><span class="atv">"ref"</span><span class="tag">/&gt;</span><span class="pln">
        </span><span class="tag">&lt;/xsd:appinfo&gt;</span><span class="pln">
      </span><span class="tag">&lt;/xsd:annotation&gt;</span><span class="pln">
    </span><span class="tag">&lt;/xsd:attribute&gt;</span><span class="pln">
    </span><span class="tag">&lt;xsd:attribute</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"topic"</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"xsd:string"</span><span class="tag">&gt;</span><span class="pln">
      </span><span class="tag">&lt;xsd:annotation&gt;</span><span class="pln">
        </span><span class="tag">&lt;xsd:documentation&gt;</span><span class="pln">&lt;![CDATA[
The topics(s) to which the listener is subscribed. Can be (in Redis terminology) a
channel or/and a pattern. Multiple values can be specified by separating them with
spaces. Patterns can be specified by using the '*' character.
        ]]&gt;</span><span class="tag">&lt;/xsd:documentation&gt;</span><span class="pln">
      </span><span class="tag">&lt;/xsd:annotation&gt;</span><span class="pln">
    </span><span class="tag">&lt;/xsd:attribute&gt;</span><span class="pln">
    </span><span class="tag">&lt;xsd:attribute</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"method"</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"xsd:string"</span><span class="tag">&gt;</span><span class="pln">
      </span><span class="tag">&lt;xsd:annotation&gt;</span><span class="pln">
        </span><span class="tag">&lt;xsd:documentation&gt;</span><span class="pln">&lt;![CDATA[
The name of the listener method to invoke. If not specified,
the target bean is supposed to implement the MessageListener
interface or provide a method named 'handleMessage'.
        ]]&gt;</span><span class="tag">&lt;/xsd:documentation&gt;</span><span class="pln">
      </span><span class="tag">&lt;/xsd:annotation&gt;</span><span class="pln">
    </span><span class="tag">&lt;/xsd:attribute&gt;</span><span class="pln">
    </span><span class="tag">&lt;xsd:attribute</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"serializer"</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"xsd:string"</span><span class="tag">&gt;</span><span class="pln">
      </span><span class="tag">&lt;xsd:annotation&gt;</span><span class="pln">
        </span><span class="tag">&lt;xsd:documentation&gt;</span><span class="pln">&lt;![CDATA[
A reference to the RedisSerializer strategy for converting Redis Messages to
listener method arguments. Default is a StringRedisSerializer.
        ]]&gt;</span><span class="tag">&lt;/xsd:documentation&gt;</span><span class="pln">
        </span><span class="tag">&lt;xsd:appinfo&gt;</span><span class="pln">
          </span><span class="tag">&lt;tool:annotation</span><span class="pln"> </span><span class="atn">kind</span><span class="pun">=</span><span class="atv">"ref"</span><span class="tag">&gt;</span><span class="pln">
            </span><span class="tag">&lt;tool:expected-type</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"org.springframework.data.redis.serializer.RedisSerializer"</span><span class="tag">/&gt;</span><span class="pln">
          </span><span class="tag">&lt;/tool:annotation&gt;</span><span class="pln">
        </span><span class="tag">&lt;/xsd:appinfo&gt;</span><span class="pln">
      </span><span class="tag">&lt;/xsd:annotation&gt;</span><span class="pln">
    </span><span class="tag">&lt;/xsd:attribute&gt;</span><span class="pln">
  </span><span class="tag">&lt;/xsd:complexType&gt;</span><span class="pln">

  </span><span class="tag">&lt;xsd:element</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"collection"</span><span class="tag">&gt;</span><span class="pln">
    </span><span class="tag">&lt;xsd:annotation&gt;</span><span class="pln">
      </span><span class="tag">&lt;xsd:documentation&gt;</span><span class="pln">&lt;![CDATA[
Factory creating collections on top of Redis keys.
      ]]&gt;</span><span class="tag">&lt;/xsd:documentation&gt;</span><span class="pln">
      </span><span class="tag">&lt;xsd:appinfo&gt;</span><span class="pln">
        </span><span class="tag">&lt;tool:annotation&gt;</span><span class="pln">
          </span><span class="tag">&lt;tool:exports</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"org.springframework.data.redis.support.collections.RedisCollectionFactoryBean"</span><span class="tag">/&gt;</span><span class="pln">
        </span><span class="tag">&lt;/tool:annotation&gt;</span><span class="pln">
      </span><span class="tag">&lt;/xsd:appinfo&gt;</span><span class="pln">
    </span><span class="tag">&lt;/xsd:annotation&gt;</span><span class="pln">
    </span><span class="tag">&lt;xsd:complexType&gt;</span><span class="pln">
	  </span><span class="tag">&lt;xsd:attribute</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"id"</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"xsd:ID"</span><span class="tag">&gt;</span><span class="pln">
		</span><span class="tag">&lt;xsd:annotation&gt;</span><span class="pln">
			</span><span class="tag">&lt;xsd:documentation&gt;</span><span class="pln">&lt;![CDATA[
The name of the Redis collection.]]&gt;</span><span class="tag">&lt;/xsd:documentation&gt;</span><span class="pln">
		</span><span class="tag">&lt;/xsd:annotation&gt;</span><span class="pln">
	  </span><span class="tag">&lt;/xsd:attribute&gt;</span><span class="pln">
      </span><span class="tag">&lt;xsd:attribute</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"key"</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"xsd:string"</span><span class="pln"> </span><span class="atn">use</span><span class="pun">=</span><span class="atv">"optional"</span><span class="tag">&gt;</span><span class="pln">
        </span><span class="tag">&lt;xsd:annotation&gt;</span><span class="pln">
          </span><span class="tag">&lt;xsd:documentation&gt;</span><span class="pln">&lt;![CDATA[
Redis key of the created collection. Defaults to bean id.
          ]]&gt;</span><span class="tag">&lt;/xsd:documentation&gt;</span><span class="pln">
        </span><span class="tag">&lt;/xsd:annotation&gt;</span><span class="pln">
      </span><span class="tag">&lt;/xsd:attribute&gt;</span><span class="pln">
      </span><span class="tag">&lt;xsd:attribute</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"template"</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"xsd:string"</span><span class="pln"> </span><span class="atn">default</span><span class="pun">=</span><span class="atv">"redisTemplate"</span><span class="tag">&gt;</span><span class="pln">
        </span><span class="tag">&lt;xsd:annotation&gt;</span><span class="pln">
          </span><span class="tag">&lt;xsd:documentation&gt;</span><span class="pln">&lt;![CDATA[
A reference to a RedisTemplate bean.Default is "redisTemplate".
          ]]&gt;</span><span class="tag">&lt;/xsd:documentation&gt;</span><span class="pln">
          </span><span class="tag">&lt;xsd:appinfo&gt;</span><span class="pln">
            </span><span class="tag">&lt;tool:annotation</span><span class="pln"> </span><span class="atn">kind</span><span class="pun">=</span><span class="atv">"ref"</span><span class="tag">&gt;</span><span class="pln">
              </span><span class="tag">&lt;tool:expected-type</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"org.springframework.data.redis.core.RedisTemplate"</span><span class="tag">/&gt;</span><span class="pln">
            </span><span class="tag">&lt;/tool:annotation&gt;</span><span class="pln">
          </span><span class="tag">&lt;/xsd:appinfo&gt;</span><span class="pln">
        </span><span class="tag">&lt;/xsd:annotation&gt;</span><span class="pln">
      </span><span class="tag">&lt;/xsd:attribute&gt;</span><span class="pln">
      </span><span class="tag">&lt;xsd:attribute</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"type"</span><span class="pln"> </span><span class="atn">default</span><span class="pun">=</span><span class="atv">"LIST"</span><span class="pln"> </span><span class="atn">use</span><span class="pun">=</span><span class="atv">"optional"</span><span class="tag">&gt;</span><span class="pln">
        </span><span class="tag">&lt;xsd:annotation&gt;</span><span class="pln">
          </span><span class="tag">&lt;xsd:documentation&gt;</span><span class="pln">&lt;![CDATA[
The collection type (default is list).
If the key exists, its type takes priority. The type is used to disambiguate the collection type (map vs properties) or
specify one in case the key is missing.]]&gt;</span><span class="tag">&lt;/xsd:documentation&gt;</span><span class="pln">
        </span><span class="tag">&lt;/xsd:annotation&gt;</span><span class="pln">
        </span><span class="tag">&lt;xsd:simpleType&gt;</span><span class="pln">
        	</span><span class="tag">&lt;xsd:restriction</span><span class="pln"> </span><span class="atn">base</span><span class="pun">=</span><span class="atv">"xsd:string"</span><span class="tag">&gt;</span><span class="pln">
        		</span><span class="tag">&lt;xsd:enumeration</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"LIST"</span><span class="tag">/&gt;</span><span class="pln">
        		</span><span class="tag">&lt;xsd:enumeration</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"SET"</span><span class="tag">/&gt;</span><span class="pln">
        		</span><span class="tag">&lt;xsd:enumeration</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"ZSET"</span><span class="tag">/&gt;</span><span class="pln">
        		</span><span class="tag">&lt;xsd:enumeration</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"MAP"</span><span class="tag">/&gt;</span><span class="pln">
        		</span><span class="tag">&lt;xsd:enumeration</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"PROPERTIES"</span><span class="tag">/&gt;</span><span class="pln">
        	</span><span class="tag">&lt;/xsd:restriction&gt;</span><span class="pln">
        </span><span class="tag">&lt;/xsd:simpleType&gt;</span><span class="pln">
      </span><span class="tag">&lt;/xsd:attribute&gt;</span><span class="pln">
    </span><span class="tag">&lt;/xsd:complexType&gt;</span><span class="pln">
  </span><span class="tag">&lt;/xsd:element&gt;</span><span class="pln">
</span><span class="tag">&lt;/xsd:schema&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendix:command-reference"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#appendix:command-reference"></a>Appendix B: Command Reference</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_supported_commands"><a class="anchor" href="http://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#_supported_commands"></a>Supported commands</h3>
<table class="tableblock frame-all grid-all" style="width: 50%;">
<caption class="title">Table 4. Redis commands supported by RedisTemplate.</caption>
<colgroup>
<col style="width: 66%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Command</th>
<th class="tableblock halign-center valign-top">Template Support</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">APPEND</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AUTH</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BGREWRITEAOF</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BGSAVE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BITCOUNT</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BITOP</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BLPOP</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BRPOP</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BRPOPLPUSH</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CLIENT KILL</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CLIENT GETNAME</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CLIENT LIST</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CLIENT SETNAME</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CLUSTER SLOTS</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">COMMAND</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">COMMAND COUNT</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">COMMAND GETKEYS</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">COMMAND INFO</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CONFIG GET</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CONFIG RESETSTAT</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CONFIG REWRITE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CONFIG SET</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DBSIZE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DEBUG OBJECT</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DEBUG SEGFAULT</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DECR</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DECRBY</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DEL</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DISCARD</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DUMP</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ECHO</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">EVAL</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">EVALSHA</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">EXEC</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">EXISTS</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">EXPIRE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">EXPIREAT</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FLUSHALL</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FLUSHDB</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GETBIT</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GETRANGE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GETSET</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HDEL</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HEXISTS</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HGET</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HGETALL</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HINCRBY</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HINCRBYFLOAT</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HKEYS</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HLEN</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HMGET</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HMSET</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HSCAN</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HSET</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HSETNX</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HVALS</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">INCR</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">INCRBY</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">INCRBYFLOAT</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">INFO</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">KEYS</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LASTSAVE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LINDEX</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LINSERT</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LLEN</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LPOP</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LPUSH</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LPUSHX</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LRANGE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LREM</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LSET</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LTRIM</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MGET</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MIGRATE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MONITOR</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MOVE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSET</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MSETNX</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MULTI</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OBJECT</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PERSIST</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PEXIPRE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PEXPIREAT</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PFADD</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PFCOUNT</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PFMERGE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PING</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PSETEX</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PSUBSCRIBE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PTTL</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUBLISH</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUBSUB</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUBSUBSCRIBE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">QUIT</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RANDOMKEY</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RENAME</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RENAMENX</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RESTORE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ROLE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RPOP</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RPOPLPUSH</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RPUSH</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RPUSHX</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SADD</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SAVE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SCAN</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SCARD</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SCRIPT EXITS</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SCRIPT FLUSH</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SCRIPT KILL</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SCRIPT LOAD</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SDIFF</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SDIFFSTORE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SELECT</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SENTINEL FAILOVER</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SENTINEL GET-MASTER-ADD-BY-NAME</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SENTINEL MASTER</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SENTINEL MASTERS</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SENTINEL MONITOR</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SENTINEL REMOVE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SENTINEL RESET</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SENTINEL SET</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SENTINEL SLAVES</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SET</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SETBIT</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SETEX</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SETNX</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SETRANGE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHUTDOWN</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SINTER</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SINTERSTORE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SISMEMBER</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SLAVEOF</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SLOWLOG</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMEMBERS</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMOVE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SORT</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SPOP</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SRANDMEMBER</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SREM</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SSCAN</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">STRLEN</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SUBSCRIBE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SUNION</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SUNIONSTORE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SYNC</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TIME</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TTL</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TYPE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UNSUBSCRIBE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UNWATCH</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WATCH</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZADD</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZCARD</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZCOUNT</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZINCRBY</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZINTERSTORE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZLEXCOUNT</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZRANGE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZRANGEBYLEX</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZREVRANGEBYLEX</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZRANGEBYSCORE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZRANK</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZREM</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZREMRANGEBYLEX</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZREMRANGEBYRANK</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZREVRANGE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZREVRANGEBYSCORE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZREVRANK</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZSCAN</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZSCORE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZUNINONSTORE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.7.4.RELEASE<br>
Last updated 2016-09-29 13:53:06 MESZ
</div>
</div>
<link rel="stylesheet" href="./Spring Data Redis_files/prettify.min.css">
<script type="text/javascript" async="" src="./Spring Data Redis_files/ga.js"></script><script src="./Spring Data Redis_files/prettify.min.js"></script>
<script>prettyPrint()</script>
 
<script type="text/javascript">
        var _gaq = _gaq || [];
        var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
        _gaq.push(
            ['_require', 'inpage_linkid', pluginUrl],
            ['_setAccount', 'UA-2728886-23'],
            ['_trackPageview'],
            ['b._require', 'inpage_linkid', pluginUrl],
            ['b._setAccount', 'UA-2728886-19'],
            ['b._trackPageview']
        );
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
 
<script type="text/javascript">

function detectLastFrame() {
   var thisF = this.window;
   var allF = parent.top.frames;
   return allF[allF.length - 1] == thisF; }

// Only inject the following code if this is a normal page or the last // frame of a frameset.
if (parent.top.frames.length == 0 || detectLastFrame()) {
    // Inject the SpringSource search widget too.
    document.write(unescape("%3Cscript src='http://search.springsource.org/widget/searchtool.js' type='text/javascript'%3E%3C/script%3E"));
    // Inject the Eloqua code
    //document.write(unescape("%3Cscript src='/elqNow/elqCfg.js' type='text/javascript'%3E%3C/script%3E"));
    //document.write(unescape("%3Cscript src='/elqNow/elqImg.js' type='text/javascript'%3E%3C/script%3E"));

}
</script><script src="./Spring Data Redis_files/searchtool.js" type="text/javascript"></script>

<div id="bodyEmptyFiller">&nbsp;</div><div id="searchBar" style="left: 0px;">  <div id="collapseLink" style="left:-1px;bottom:1px;" class="barOpen"><a href="javascript:void(0);"><img border="0" class="springClass" src="./Spring Data Redis_files/ArrowLeft_spring.png"></a></div>  <div id="logoSpan" class="springClass"><a target="_new" href="http://spring.io/"><img class="springClass" border="0" src="./Spring Data Redis_files/Logo_spring_SearchBar.png"></a></div>  <div id="searchFields">    <input name="searchKeys" type="text" id="searchKeys" value="Search Documentation" style="color: rgb(204, 204, 204);">    <select name="searchWhat" id="searchWhat"><option value="Spring">Spring</option></select>    <img title="Search Documentation" src="./Spring Data Redis_files/Btn_Search_spring.png" id="searchLens">  </div>  <div id="resultsDiv"></div> <div id="daAd">    <div class="PivotalAdBannerDiv"></div>      </div></div></body></html>